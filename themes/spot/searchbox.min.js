!function(a){function b(a,b){b=b||{};var c=b.sprintf||[],d=a;return e(i)&&(translation=h[i],translation.hasOwnProperty(a)&&(d=translation[a])),l(d,c)}function c(a,b,c){c=c||{};var d=c.count,f=c.sprintf||[],g=a,k=j[i],m=k(d);return 0===f.length&&f.push(d),1==m&&(g=b),e(i)&&(translation=h[i],translation.hasOwnProperty(a)&&(results=translation[a],Array.isArray(results)&&m<results.length&&(g=results[k(d)]))),l(g,f)}function d(a,b,c){h[a]=b,c===!0&&f(a)}function e(a){return h.hasOwnProperty(a)}function f(a){i=a}var g={},h={},i="en-us",j={"en-us":function(a){return Number(1!=a)},"en-gb":function(a){return Number(1!=a)},"es-us":function(a){return Number(1!=a)},"fr-fr":function(a){return Number(a>1)}},k=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function b(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var e,f,g,h,i,j,l,m=1,n=c.length,o="",p=[];for(f=0;n>f;f++)if(o=a(c[f]),"string"===o)p.push(c[f]);else if("array"===o){if(h=c[f],h[2])for(e=d[m],g=0;g<h[2].length;g++){if(!e.hasOwnProperty(h[2][g]))throw k('[sprintf] property "%s" does not exist',h[2][g]);e=e[h[2][g]]}else e=h[1]?d[h[1]]:d[m++];if(/[^s]/.test(h[8])&&"number"!=a(e))throw k("[sprintf] expecting number but found %s",a(e));switch(h[8]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e,10);break;case"e":e=h[7]?e.toExponential(h[7]):e.toExponential();break;case"f":e=h[7]?parseFloat(e).toFixed(h[7]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&h[7]?e.substring(0,h[7]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(h[8])&&h[3]&&e>=0?"+"+e:e,j=h[4]?"0"==h[4]?"0":h[4].charAt(1):" ",l=h[6]-String(e).length,i=h[6]?b(j,l):"",p.push(h[5]?e+i:i+e)}return p.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw"[sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw"[sprintf] huh?";for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw"[sprintf] huh?";f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d},c}(),l=function(a,b){b.unshift(a);try{return k.apply(null,b)}catch(c){return console.error(c),b}};g._t=b,g._n=c,g.set_lang=f,g.add_lang=d,g.has_lang=e,g.sprintf=k,g.vsprintf=l,a.i18n=a.i18n||g}(jQuery,window,document);var uuid=null;!function(a,b,c,d){function e(){for(var a,b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",e[0];)return b>4?b:a}function f(){var a,b=(new Date).getTime();return uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){return a=(b+16*Math.random())%16|0,b=Math.floor(b/16),("x"==c?a:7&a|8).toString(16)})}function g(b){var c={v:"1",tid:"UA-1825499-106",cid:uuid};return b.el&&"object"==typeof b.el&&"undefined"==typeof JSON?!1:(b.el&&"object"==typeof b.el&&(b.el=JSON.stringify(b.el)),void a.ajax({type:"POST",url:("https:"==location.protocol?"https://ssl.":"http://www.")+"google-analytics.com/collect",data:a.extend(!0,{},c,b)}))}function h(a,c){c="undefined"==c?!0:c,"undefined"==typeof b.console||e()||console.log("object"==typeof a?a:c?"Searchbox Error: "+a:a)}var i=function(a,b,d){return this.options=b,this.$el=a,this.init(),"function"==typeof d&&d&&d.call(this),g({t:"event",ec:"searchbox load",ea:this.options.refid+": "+location.href,el:{version:this.config.version,version_date:this.config.version_date}}),g({an:this.config.version_date,av:this.config.version,aid:"searchbox",t:"screenview",cd:this.options.refid,dt:c.location.hostname}),this};i.prototype={dates:{now:new Date,today:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),max_date:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+329),days_in_months:[31,29==new Date((new Date).getFullYear(),1,29).getDate()?29:28,31,30,31,30,31,31,30,31,30,31],months:[a.i18n._t("January"),a.i18n._t("February"),a.i18n._t("March"),a.i18n._t("April"),a.i18n._t("May"),a.i18n._t("June"),a.i18n._t("July"),a.i18n._t("August"),a.i18n._t("September"),a.i18n._t("October"),a.i18n._t("November"),a.i18n._t("December")],days:[a.i18n._t("Sunday"),a.i18n._t("Monday"),a.i18n._t("Tuesday"),a.i18n._t("Wednesday"),a.i18n._t("Thursday"),a.i18n._t("Friday"),a.i18n._t("Saturday")]},init:function(){var a;this.init_check("hotel"),this.init_check("car"),this.init_check("air"),this.init_check("vp"),this.ua=b.navigator.userAgent,this.options.hotel.currentDate=this.options.car.currentDate=this.options.air.currentDate=this.options.vp.currentDate=this.dates.now,this.config={protocol:"file:"==b.location.protocol?"http:":"",version:"2.23.3",version_date:"7/28/2015",mobile:!1},this.config.refdata_url=this.init_getURL("refdata"),this.config.autosuggest_url=this.init_getURL("autosuggest"),/iPhone|iPod|iPad|Android|BlackBerry|BB10|RIM Tablet|Windows Phone|SymbianOS|Kindle|Silk/.test(this.ua)&&(this.options.hotel.autosuggest.geolocation=!0,this.options.car.autosuggest.geolocation=!0,this.options.vp.autosuggest.geolocation=!0,this.options.air.autosuggest.geolocation=!0,this.config.mobile=!0),this.options.skip_ref?(this.options.vcid=this.options.vcid||28948,this.options.cname=this.init_getURL("cname"),this.init_bind("hotel"),this.init_bind("car"),this.init_bind("air"),this.init_bind("vp")):(a=new Date,this.init_ref(),g({t:"timing",utc:"searchbox getRefData",utv:"load",utl:this.options.refid+": "+location.href,utt:new Date-a})),this.init_plugin(),this.options.hotel.express_deals&&(this.options.hotel.autosuggest.hotels=!1,this.options.hotel.autosuggest.pois=!1,this.options.hotel.autosuggest.regions=!1,this.options.hotel.autosuggest.airports=!1,this.options.hotel.calendar.required=!0)},init_plugin:function(){var b,c=this;2486==parseInt(this.options.refid)?(this.options.hotel.autosuggest.generate=!1,this.options.hotel.autosuggest.geolocation=!1,b="p_2486"):6758==parseInt(this.options.refid)&&"6758_venues"==this.options.hotel.autosuggest.plugin?(this.options.hotel.autosuggest.generate=!1,this.options.hotel.autosuggest.geolocation=!1,b="p_6758",this.check_add(a(".rs_searchbox_plugin",this.options.hotel.$parent),this.options.hotel.$parent,'<input name="searchbox_plugin" class="rs_searchbox_plugin" type="hidden" />',"6758_venues")):6912==parseInt(this.options.refid)&&"6912_events"==this.options.hotel.autosuggest.plugin?(this.options.hotel.autosuggest.generate=!1,this.options.hotel.autosuggest.geolocation=!1,b="p_6912",this.check_add(a(".rs_searchbox_plugin",this.options.hotel.$parent),this.options.hotel.$parent,'<input name="searchbox_plugin" class="rs_searchbox_plugin" type="hidden" />',"6912_events")):2547==parseInt(this.options.refid)&&"2547_colleges"==this.options.hotel.autosuggest.plugin&&(this.options.hotel.autosuggest.generate=!1,this.options.hotel.autosuggest.geolocation=!1,b="p_2547",this.check_add(a(".rs_searchbox_plugin",this.options.hotel.$parent),this.options.hotel.$parent,'<input name="searchbox_plugin" class="rs_searchbox_plugin" type="hidden" />',"2547_colleges")),b&&a.ajax({url:this.init_getURL("plugin").replace("{name}",b),crossDomain:!0,dataType:"script",success:function(){c.options.hotel.autosuggest.callback=a.fn.searchbox.autosuggest_plugin},error:function(){h('Could not load plugin "'+b+'".'),g({t:"event",ec:"searchbox error",ea:c.options.refid+": "+location.href,el:'Could not load plugin "'+b+'".'})}})},init_check:function(b){var c,d,e=[],f=this.options[b];if(f.enabled)for(c in f.elements)f.elements.hasOwnProperty(c)&&("form"==c?(d=f.elements[c].charAt(0),0===a("form[name="+f.elements[c]+"]",this.$el).length&&"#"!=d&&"."!=d||0===a(f.elements[c],this.$el).length&&("#"==d||"."==d)?e.push("The specified form for "+b+" does not exist."):f.$parent="#"==d||"."==d?a(f.elements[c],this.$el):a("form[name="+f.elements[c]+"]",this.$el)):0===a(f.elements[c],f.$parent).length&&"required"!=c&&("chk_in"==c||"chk_out"==c?0===a(f.elements.month_in,f.$parent).length&&0===a(f.elements.month_out,f.$parent).length&&0===a(f.elements.day_in,f.$parent).length&&0===a(f.elements.day_out,f.$parent).length&&f.elements.required&&e.push("The specified div for "+b+' "'+c+'" does not exist.'):"month_in"==c||"month_out"==c||"day_in"==c||"day_out"==c?0===a(f.elements.chk_in,f.$parent).length&&0===a(f.elements.chk_out,f.$parent).length&&f.elements.required&&e.push("The specified div for "+b+' "'+c+'" does not exist.'):"round_trip"==c&&!f.elements.round_trip||"one_way"==c&&!f.elements.one_way||"multi_dest"==c&&!f.elements.multi_dest||"infant_seating"==c||f.elements.required&&e.push("The specified div for "+b+' "'+c+'" does not exist.')));return e.length>0&&f.elements.required?(g({t:"event",ec:"searchbox error",ea:this.options.refid+": "+location.href,el:e.join(" ")}),h(e.join(" ")),!1):!0},init_getURL:function(a){var b="";return b="local"==this.options.environment&&-1!==c.location.hostname.indexOf("rezserver3.localhost")?"//rezserver3.localhost:8080":"local"==this.options.environment&&-1!==c.location.hostname.indexOf("rezserver3.ppn.local")?"//"+c.location.hostname:"local"==this.options.environment?"//rezserver3.ppn.local":"qa"==this.options.environment?"//qa.rezserver.com":-1!==c.location.hostname.indexOf("a401.corp")?"//www.a401.corp.rezserver.com":-1!==c.location.hostname.indexOf("b402.corp")?"//www.b402.corp.rezserver.com":-1!==c.location.hostname.indexOf("a403.corp")?"//www.a403.corp.rezserver.com":-1!==c.location.hostname.indexOf("a001.corp")?"//secure.a001.corp.rezserver.com":-1!==c.location.hostname.indexOf("a002.corp")?"//secure.a002.corp.rezserver.com":-1!==c.location.hostname.indexOf("a003.corp")?"//secure.a003.corp.rezserver.com":-1!==c.location.hostname.indexOf("p1.corp")?"//www.p1.corp.rezserver.com":"//secure.rezserver.com","refdata"==a?b=this.config.protocol+b+"/api/getRefData":"autosuggest"==a?b=this.config.protocol+b+"/api/autosuggest/":"cname"==a?b=this.options.backend||""==this.options.cname&&"prod"==this.options.environment?"":("http"==this.options.protocol||"https"==this.options.protocol?this.options.protocol+":":this.config.protocol)+"//"+this.options.cname.replace(/(^http:\/\/www\.)|(^https:\/\/www\.)|(^http:\/\/)|(^https:\/\/)|(^\/\/)/,""):"plugin"==a&&(b+="local"==this.options.environment?"/shared/js/searchbox/plugins/{name}.js":"/public/js/searchbox/plugins/{name}.min.js"),b},init_ref:function(){var b=this,c={refid:this.options.refid,jsoncallback:"?"};a.getJSON(this.config.refdata_url+this.build_query(c),function(a){a.error?(h("RefData "+a.error),g({t:"event",ec:"searchbox error",ea:b.options.refid+": "+location.href,el:"RefData Error: "+JSON.stringify(a)})):(b.options.hotel.active="1"==a.products.hotel.product_on_off,b.options.car.active="1"==a.products.car.product_on_off,b.options.air.active="1"==a.products.air.product_on_off,b.options.vp.active="1"==a.products.vp.product_on_off,b.options.hotel.version=a.products.hotel.version,b.options.car.version=a.products.car.version,b.options.air.version=a.products.air.version,b.options.vp.version=a.products.vp.version,b.options.filter_city=a.filter_city||!1,b.options.filter_country=a.filter_country||!1,b.options.filter_state=a.filter_state||!1,b.options.cname="//secure.rezserver.com"!=b.options.cname?b.options.cname:("http"==b.options.protocol||"https"==b.options.protocol?b.options.protocol+":":b.config.protocol)+"//"+(a.domain_mask||b.options.cname).replace(/(^http:\/\/www\.)|(^https:\/\/www\.)|(^http:\/\/)|(^https:\/\/)|(^\/\/)/,""),b.options.accountid=parseInt(a.accountid),b.options.group_booking=a.group_booking_url&&a.group_booking_url.length>10?a.group_booking_url:!1,b.options.allow_group_booking=!("0"!=a.group_booking_flag&&"1"!=a.group_booking_flag),b.options.vcid=a.vcid&&"0"!=a.vcid?a.vcid:28948,b.options.pet_friendly=a.plugin&&a.plugin.pet_friendly&&"1"==a.plugin.pet_friendly||1==b.options.pet_friendly?!0:!1,""==b.options.cname&&(b.options.cname=b.init_getURL("cname")),b.init_bind("hotel"),b.init_bind("car"),b.init_bind("air"),b.init_bind("vp"))}).fail(function(){h("Could not retrieve RefData."),g({t:"event",ec:"searchbox error",ea:b.options.refid+": "+location.href,el:"Could not retrieve RefData."})})},init_bind:function(b){var c,e,f,i,j=this.options[b];if(j.enabled&&j.active){for(c=j.elements.search.replace(/\s+/g,"").split(","),e=j.elements.chk_in.replace(/\s+/g,"").split(","),f=j.elements.chk_out.replace(/\s+/g,"").split(","),i=0;i<c.length;i++)a(c[i],j.$parent).on("click.searchbox",{_self:this,product:b},function(b){return b.data._self.check_form(a(this),b.data.product)});for(i=0;i<e.length;i++)a(e[i],j.$parent).on("click.searchbox",{_self:this,product:b},function(b){b.data._self.make_cal(a(this),b.data.product,"chk_in")});for(i=0;i<f.length;i++)a(f[i],j.$parent).on("click.searchbox",{_self:this,product:b},function(b){b.data._self.make_cal(a(this),b.data.product,"chk_out")});if(j.elements.geo&&a(j.elements.geo,j.$parent).on("click.searchbox",{_self:this,product:b},function(b){b.data._self.get_location(a("input[name="+("hotel"==b.data.product?"query":"car"==b.data.product?"rs_pu_city":"rs_o_city")+"]",b.data._self.options[b.data.product].$parent),b.data.product,a(this))}),(j.autosuggest.enabled||j.autocomplete)&&(a(j.elements["hotel"==b?"autosuggest":"from"],j.$parent).prop("onclick",null).on("keyup.searchbox",{_self:this,product:b},function(b){b.data._self.autosuggest(a(this),b)}).on("keydown.searchbox",{_self:this,product:b},function(b){b.data._self.autosuggest(a(this),b)}).on("click.searchbox",{_self:this,product:b},function(b){var c=a(this);b.data._self.options[b.data.product].autosuggest.geolocation&&(b.stopPropagation(),b.data._self.create_geo(c,b.data.product)),c.select(),b.data._self.config.mobile&&a("body, html").animate({scrollTop:a(this).offset().top},0,function(){c.val()==(j.autosuggest.default_label||j.autosuggest.from_default_label)&&c.val("").blur(function(){""==a(this).val()&&a(this).val(j.autosuggest.default_label||j.autosuggest.from_default_label)})}),b.stopImmediatePropagation()}),("car"==b||"air"==b||"vp"==b)&&a(j.elements.to,j.$parent).prop("onclick",null).on("keyup.searchbox",{_self:this,product:b},function(b){b.data._self.autosuggest(a(this),b)}).on("keydown.searchbox",{_self:this,product:b},function(b){b.data._self.autosuggest(a(this),b)}).on("click.searchbox",{_self:this,product:b},function(b){var c=a(this);b.data._self.options[b.data.product].autosuggest.geolocation&&(b.stopPropagation(),b.data._self.create_geo(a(this),b.data.product)),c.select(),b.data._self.config.mobile&&a("body, html").animate({scrollTop:a(this).offset().top},0,function(){c.val()==j.autosuggest.to_default_label&&c.val("").blur(function(){""==a(this).val()&&a(this).val(j.autosuggest.to_default_label)})}),b.stopImmediatePropagation()})),"hotel"!=b&&"vp"!=b||!j.generate_rooms||this.generate_rooms(b),"hotel"!=b&&"air"!=b&&"vp"!=b||!j.generate_guests||this.generate_guests(b),"hotel"==b&&0!==a("select[name="+j.names.rooms+"]",j.$parent).length&&0!==a("select[name="+j.names.adults+"]",j.$parent).length&&a(j.elements.rooms,j.$parent).on("change.searchbox",{_self:this,product:b},function(a){a.data._self.generate_guests(a.data.product)}),"car"==b&&j.calendar.generate_time&&(this.generate_time(b,"time_in"),this.generate_time(b,"time_out")),"air"==b)for(i=1;5>=i;i++)j.elements["month_in"+i]&&j.elements["day_in"+i]&&(this.generate_months(b,"month_in"+i),this.generate_months(b,"month_out"+i)),j.elements.multi_dest&&i>1&&a(j.elements.multi_dest+" input[name=rs_o_city"+i+"]",j.$parent).on("click.searchbox",{_self:this,d:"d"+(i-1)+"_set",i:i},function(b){(0==b.data._self.options.air[b.data.d]||b.data._self.options.air[b.data.d]==d)&&(b.data._self.options.air[b.data.d]=!0,(""==a(this).val()||a(this).val()==b.data._self.options.air.autosuggest.from_default_label)&&a(this).val(a(b.data._self.options.air.elements.multi_dest+" input[name=rs_d_city"+(b.data.i-1)+"]",b.data._self.options.air.$parent).val()).select(),""!=a(".rs_d_aircode"+(b.data.i-1),b.data._self.options.air.elements.multi_dest).val()&&b.data._self.check_add(a(".rs_o"+b.data.i+"_aircode",b.data._self.options.air.elements.multi_dest),a(b.data._self.options.air.elements.multi_dest,b.data._self.options.air.$parent),'<input name="rs_o_aircode'+b.data.i+'" class="rs_o'+b.data.i+'_aircode" type="hidden" />',a(".rs_d"+(b.data.i-1)+"_aircode",b.data._self.options.air.elements.multi_dest).val()))});"vp"==b&&(a(j.elements.children,j.$parent).on("change.searchbox",{_self:this},function(b){b.data._self.generate_children(a(this),"vp")}),a("select",j.elements.children_ages).on("change.searchbox",{_self:this},function(a){a.data._self.generate_infants("vp")})),j.calendar.today&&this.auto_set(b),j.elements.month_in&&j.elements.month_out&&j.elements.day_in&&j.elements.day_out&&(this.generate_months(b,"month_in"),this.generate_months(b,"month_out")),/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}/.test(a(".rs_chk_in",j.$parent).val())!==!1&&(j.currentDate=new Date(a(".rs_chk_in",j.$parent).val()),j.chk_in=a(".rs_chk_in",j.$parent).val()),/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}/.test(a(".rs_chk_out",j.$parent).val())!==!1&&(j.currentDate=new Date(a(".rs_chk_out",j.$parent).val()),j.chk_out=a(".rs_chk_out",j.$parent).val())}else j.enabled&&!j.active&&(h('The "'+b+'" product is not enabled. It must be enabled before you can use it in the searchbox.'),g({t:"event",ec:"searchbox error",ea:this.options.refid+": "+location.href,el:'The "'+b+'" product is not enabled.'}))},build_query:function(a){var b,c="";for(b in a)c+="&"+b+"="+a[b];return"?"+c.substr(1)},get_location:function(c,d,e){var f=this;"geolocation"in navigator?(this.reset_form(c,d),c.val(a.i18n._t("Please wait...")).prop("disabled",!0).css("background","#fff url("+("file:"==b.location.protocol?"http:":"")+"'//media.rezserver.com/img/loader.gif') no-repeat right 10px center"),navigator.geolocation.getCurrentPosition(function(a){f.set_location(c,d,a,e)},function(a){f.error_location(c,d,a)},{enableHighAccuracy:!0,timeout:6e4})):(g({t:"event",ec:"searchbox error",ea:this.options.refid+": "+location.href,el:"Geo location not supported or not allowed."}),this.check_alert(d,"Sorry, your web browser does not support this feature. Please enter a location instead."))},check_add:function(b,c,d,e,f){var i;return b&&c&&d?(f||(f="append"),0===b.length?(i=a(d),e&&i.val(e),"append"==f?c.append(i):"after"==f&&c.after(i)):e&&b.val(e),!0):(h("Missing required variable for check_add()."),g({t:"event",ec:"searchbox error",ea:location.href,el:"Missing required variable for check_add()."}),!1)},check_remove:function(a,b){return a?(0!==a.length&&(b?a.val(""):a.remove()),!0):(h("Missing required variable for check_remove()."),g({t:"event",ec:"searchbox error",ea:location.href,el:"Missing required variable for check_remove()."}),!1)},reset_form:function(b,c){var d,e=this.options[c];if("hotel"==c)this.check_remove(a(".rs_cityid",e.$parent)),this.check_remove(a(".rs_airid",e.$parent)),this.check_remove(a(".rs_regionid",e.$parent)),this.check_remove(a(".rs_poiid",e.$parent)),this.check_remove(a(".rs_hotelid",e.$parent)),this.check_remove(a(".rs_latitude",e.$parent)),this.check_remove(a(".rs_longitude",e.$parent));else if("car"==c)b.hasClass(e.elements.from.substr(1))||b[0].id==e.elements.from.substr(1)?(this.check_remove(a(".rs_pu_cityid",e.$parent)),this.check_remove(a(".rs_pu_airport",e.$parent)),this.check_remove(a(".rs_pickup_counter",e.$parent))):(b.hasClass(e.elements.to.substr(1))||b[0].id==e.elements.to.substr(1))&&(this.check_remove(a(".rs_do_cityid",e.$parent)),this.check_remove(a(".rs_do_airport",e.$parent)));else if("air"==c)for(d=0;5>=d;d++)b.attr("name")=="rs_o_city"+(0==d?"":d)?this.check_remove(a(".rs_o"+(0==d?"":d)+"_aircode",e.$parent)):b.attr("name")=="rs_d_city"+(0==d?"":d)&&this.check_remove(a(".rs_d"+(0==d?"":d)+"_aircode",e.$parent));else"vp"==c&&(b.hasClass(e.elements.from.substr(1))||b[0].id==e.elements.from.substr(1)?(this.check_remove(a(".rs_o_cityid",e.$parent)),this.check_remove(a(".rs_o_aircode",e.$parent))):(b.hasClass(e.elements.to.substr(1))||b[0].id==e.elements.to.substr(1))&&(this.check_remove(a(".rs_d_cityid",e.$parent)),this.check_remove(a(".rs_d_aircode",e.$parent))))},kill_request:function(a){var b=this.options[a];null!=b.request&&(b.request.abort(),b.request=null)},check_alert:function(b,c,d){var e=this.options[b];e.ignore_alerts||alert(a.i18n._t(c)),d||g({t:"event",ec:"searchbox validation error",ea:this.options.refid+": "+location.href,el:b+": "+c})},string_to_date:function(a,b){var c=a.split("/"),b=b?b.split("/"):!1;return"mm"==c[0]||null==c[0]||""==c[0]?this.dates.today:b?new Date("[Y]"==b[0]?c[0]:"[Y]"==b[1]?c[1]:c[2],("[m]"==b[0]?c[0]:"[m]"==b[1]?c[1]:c[2])-1,"[d]"==b[0]?c[0]:"[d]"==b[1]?c[1]:c[2]):new Date(c[2],c[0]-1,c[1])},do_pop:function(a,c){if(this.check_pop()&&1e3==this.options.accountid&&2999!=this.options.refid&&1420!=this.options.refid&&this.options.vcid){var d,e,f="http://www.hotelsbycity.com/hotels/pop_up.php?key="+a+"&vcid="+this.options.vcid+"&skip_tig=true"+c,g="resizable=1,scrollbars=1,menubar=1,location=1,toolbar=1,titlebar=1,width=680,height=630, top=50, left=50";e=b.open(f,"HBCPop",g),e.blur(),d=e.open("about:blank"),d.close()}},check_pop:function(){var a=this.read_cookie("lastHBCPop");return null==a?(this.create_cookie("lastHBCPop",this.dates.now.getTime(),0),!0):parseInt(a)+864e3>parseInt(this.dates.now.getTime())?!1:(this.create_cookie("lastHBCPop",this.dates.now.getTime(),0),!0)},create_cookie:function(a,b,d){var e,f="";d&&(e=new Date,e.setTime(e.getTime()+24*d*60*60*1e3),f="; expires="+e.toGMTString()),c.cookie=a+"="+b+f+"; path=/"},read_cookie:function(a){var b,d,e=a+"=",f=c.cookie.split(";");for(b=0;b<f.length;b++){for(d=f[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(e))return d.substring(e.length,d.length)}return null},generate_rooms:function(b){var c,d,e="",f=this.options.allow_group_booking?10:5,g=this.options[b];if(g.select_name)for(c=1;f>c;c++)d=9==c?"+":"",e+='<option value="'+c+'"'+(c==g.default_rooms?" selected":"")+">"+a.i18n._n("1 Room","%s Rooms",{count:c,sprintf:[c+d]})+"</option>";else for(c=1;f>c;c++)e+='<option value="'+c+'"'+(c==g.default_rooms?" selected":"")+">"+c+(9==c?"+":"")+"</option>";a(g.elements.rooms,g.$parent).append(e).trigger("change")},generate_guests:function(b){var c,d=this.options[b],e=a("select[name="+d.names.rooms+"]",d.$parent).val(),f=4*e,g=a("select[name="+d.names.adults+"]",d.$parent),h=a("select[name="+d.names.children+"]",d.$parent),i="";if("air"==b?(e=0,f=8):"vp"==b&&(e=1,f=8),0!==g.length){if(d.select_name)for(c=parseInt(e);f>=c;c++)i+='<option value="'+c+'"'+(1==e&&c==d.default_guests&&"hotel"==b||"air"==b&&c==d.default_guests||"vp"==b&&c==d.default_guests?" selected":"")+">"+(0!==h.length?a.i18n._n("1 Adult","%d Adults",{count:c}):a.i18n._n("1 Guest","%d Guests",{count:c}))+"</option>";else for(c=parseInt(e);f>=c;c++)i+='<option value="'+c+'"'+(1==e&&c==d.default_guests&&"hotel"==b||"air"==b&&c==d.default_guests||"vp"==b&&c==d.default_guests?" selected":"")+">"+c+"</option>";g.empty().append(i).trigger("change")}if(0!==h.length){if(i="","air"==b&&(e=1),d.select_name)for(c=0;f-e>=c;c++)i+='<option value="'+c+'">'+a.i18n._n("1 Child","%d Children",{count:c})+"</option>";else for(c=0;f-e>=c;c++)i+='<option value="'+c+'">'+c+"</option>";h.empty().append(i).trigger("change")}},generate_time:function(b,c){for(var d=this.options[b],e="",f=0,g="00",h=null;24>f;)h=new Date,h.setHours(f,g,0,0),e+="time_in"==c&&d.calendar.pickup_time==f+":"+g||"time_out"==c&&d.calendar.dropoff_time==f+":"+g?'<option value="'+f+":"+g+'" selected="selected">':'<option value="'+f+":"+g+'">',e+=this.format_date(b,h,d.calendar.time_format),e+="</option>","00"==g?g="30":(g="00",f++);a(d.elements[c],d.$parent).append(e).trigger("change").on("change.searchbox",{_self:this,product:b,time:c},function(b){b.data._self.set_car_time(a(this),b.data.product,b.data.time)})},generate_children:function(b,c){var d,e=this.options[c],f=b.val(),g="<span>"+a.i18n._t("Children's Ages:")+"</span>",h="<select class='childrens_ages'>";if(a(e.elements.children_ages,e.$parent).html(""),a(e.elements.infant_seating,e.$parent).html(""),f>0){for(d=17;d>0;d--)h+=1==d?'<option value="0"><2</option>':'<option value="'+d+'">'+d+"</option>";for(h+="</select>",d=1;f>=d;d++)g+=h;a(e.elements.children_ages,e.$parent).append(g),a("select",e.elements.children_ages).on("change.searchbox",{_self:this},function(a){a.data._self.generate_infants("vp")})}},generate_infants:function(b){var c,d=this.options[b],e=0,f="",g=["th","st","nd","rd"];if(a("select",d.elements.children_ages).each(function(){0==a(this).val()&&e++}),a(d.elements.infant_seating,d.$parent).html(""),e>0){for(this.check_add(a(d.elements.infant_seating,d.$parent),a(d.elements.children_ages),"<div id="+d.elements.infant_seating+"></div>"),c=1;e>=c;c++)f+='<div class="infant_seat_container">',f+="<span>"+(c+(g[(c%100-20)%10]||g[c%100]||g[0]))+" Infant Seating:</span>",f+='<div class="infant_seat">',f+='<div class="infant_seat_radio_container">',f+='<input type="radio" id="rs_infant_seat_lap'+c+'" name="rs_infant'+c+'" value="lap" />',f+='<label for="rs_infant_seat_lap'+c+'">'+a.i18n._t("Lap Infant")+"</label>",f+="</div>",f+='<div class="infant_seat_radio_container">',f+='<input type="radio" id="rs_infant_seat'+c+'" name="rs_infant'+c+'" value="seat" checked />',f+='<label for="rs_infant_seat'+c+'">'+a.i18n._t("Purchase Seat")+"</label>",f+="</div>",f+="</div>",f+="</div>";a(d.elements.infant_seating,d.$parent).html(f)}},generate_months:function(b,c){var d=this.options[b],e="<option>"+a.i18n._t("Month")+'</option><optgroup disabled="disabled" style="margin-top: 1em;"></optgroup>',f=(this.dates.today.getFullYear(),new Date(this.dates.today.getFullYear(),this.dates.today.getMonth(),1)),g=!1;for(("month_out"==c||"month_in2"==c||"month_in3"==c||"month_in4"==c||"month_in5"==c)&&(f=new Date(d.currentDate.getFullYear(),d.currentDate.getMonth(),1)),!d.calendar.today||"month_in"!=c&&"month_out"!=c&&"month_in1"!=c||(g=!0);f<=this.dates.max_date;)e+="<option "+(g?'selected="selected" ':"")+'data-month="'+f.getMonth()+'" data-year="'+f.getFullYear()+'" value="'+f.getMonth()+'">'+this.dates.months[f.getMonth()]+"</option>",f.setMonth(f.getMonth()+1),g=!1;this.generate_days(!1,b,c),a(d.elements[c],d.$parent).html(e),!d.calendar.today||"month_in"!=c&&"month_out"!=c&&"month_in1"!=c||this.generate_days(a(d.elements[c],d.$parent),b,c),a(d.elements[c],d.$parent).on("change.searchbox",{_self:this,product:b,cal:c},function(b){if(!a("option:selected",a(this)).data("year")&&!a("option:selected",a(this)).data("month")){var e=b.data.cal.replace(/([^0-9])/g,"");b.data._self.check_remove(a("input[name="+("month_in"==c||""!=e?d.names.check_in:d.names.check_out)+e+"]",d.$parent),!0)}b.data._self.generate_days(a("option:selected",a(this)),b.data.product,b.data.cal)})},generate_days:function(b,c,e,f){var g,h,i,j=this.options[c],k="",l=e.replace(/([^0-9])/g,""),e="month_in"==e?"day_in":"month_out"==e?"day_out":-1!==e.indexOf("month_in")?"day_in"+l:e;if(!b||!b.data("year")&&!b.data("month"))return k+="<option>"+a.i18n._t("Day")+"</option>",a(j.elements[e],j.$parent).html(k),!0;for(i=new Date(b.data("year"),b.data("month"),1),g=1;g<=this.dates.days_in_months[b.data("month")];g++)i.setDate(g),h=new Date("day_in2"==e?j.chk_in1||j.currentDate:"day_in3"==e?j.chk_in2||j.chk_in1||j.currentDate:"day_in4"==e?j.chk_in3||j.chk_in2||j.chk_in1||j.currentDate:"day_in5"==e?j.chk_in4||j.chk_in3||j.chk_in2||j.chk_in1||j.currentDate:j.chk_in),"day_in"==e||"day_in1"==e||("day_in2"==e||"day_in3"==e||"day_in4"==e||"day_in5"==e)&&j.calendar.allow_same&&h&&i>h?i<=this.dates.max_date&&i>=this.dates.today&&(k+='<option data-day="'+g+'">'+g+"</option>"):(i<=this.dates.max_date&&i>h||i<=this.dates.max_date&&i>this.dates.today&&j.chk_in==d&&"day_out"==e||j.calendar.allow_same&&i<=this.dates.max_date&&i>=h)&&(k+=g==h.getDate()+1&&j.calendar.next_day&&h.getMonth()==i.getMonth()?'<option data-day="'+g+'" selected="selected">'+g+"</option>":'<option data-day="'+g+'">'+g+"</option>");a(j.elements[e],j.$parent).html(k),f&&0!=f||("air"==c?this.set_date(a(j.elements[e],a(""!=l?b.parents().is(j.elements.multi_dest)?j.elements.multi_dest:j.elements.one_way:j.elements.round_trip)),c,e,!0):this.set_date(a(j.elements[e],j.$parent),c,e,!0)),a(j.elements[e],j.$parent).on("change.searchbox",{_self:this},function(b){b.data._self.set_date(a(this),c,e,!0)})},autosuggest:function(b,c){var d=c.data.product,e=this.options[d],f=e.query=b.val().replace(/([^0-9a-zA-Z\s\,\.\'\(\\&\#\-\_\/)])/g,"");if(16!=c.keyCode&&this.kill_request(d),"keydown"==c.type)switch(c.keyCode){case 13:if(0==a(".rs_suggest",e.$parent).is(":visible"))return this.check_form(b,d),!0;c.preventDefault(),this.save_selection(b,a(".rs_suggest .rs_suggest_active",e.$parent),d),a(".rs_suggest",e.$parent).hide();break;case 9:1==a(".rs_suggest",e.$parent).is(":visible")&&(c.preventDefault(),this.move_selection("down",d));break;case 8:f.length<=3&&this.reset_form(b,d);break;case 38:c.preventDefault();break;case 40:c.preventDefault()}else if("keyup"==c.type)switch(c.keyCode){case 13:c.preventDefault();break;case 38:c.preventDefault(),this.move_selection("up",d);break;case 40:c.preventDefault(),this.move_selection("down",d);break;case 27:this.reset_form(b,d);break;case 9:c.preventDefault();break;case 16:c.preventDefault();break;default:f.length>=3&&(c.keyCode>=65&&c.keyCode<=90||c.keyCode>=48&&c.keyCode<=57||c.keyCode>=96&&c.keyCode<=105||8==c.keyCode||32==c.keyCode||/(Android.[0-9]*)+.*(Chrome\/[0-9]*)/.test(this.ua))?this.query_solr(b,d,f):f.length<3&&this.reset_form(b,d)}},query_solr:function(e,f,i,j){var k=this.options[f],l=null,m=this;j=j||!1,e.css("background","#fff url("+("file:"==b.location.protocol?"http:":"")+"'//media.rezserver.com/img/loader.gif') no-repeat right 10px center"),l={format:"jsonp",product:f,refid:this.options.refid,query:encodeURIComponent(i),cities:k.autosuggest.cities||"false",airports:k.autosuggest.airports||"false",hotels:k.autosuggest.hotels||"false",regions:k.autosuggest.regions||"false",pois:k.autosuggest.pois||"false",plugin:k.autosuggest.plugin||"",pet_friendly:this.options.pet_friendly||"false",path:f,jsoncallback:"?"},g({t:"event",ec:"searchbox query",ea:this.options.refid+" - "+f+": "+location.href,el:i}),k.request=a.getJSON(this.init_getURL("autosuggest")+this.build_query(l),function(b){if(b=b.getSolr,b.error&&1208==b.error.status_code)return g({t:"event",ec:"searchbox error",ea:m.options.refid+": "+location.href,el:JSON.stringify(b)}),g({t:"timing",utc:"searchbox getSolr",utv:"load",utl:m.options.refid+": "+location.href,utt:Math.round(1e3*b.time)}),h("No results."),!1;if(b.results&&500==b.results.status_code&&!j)g({t:"event",ec:"searchbox error",ea:m.options.refid+": "+location.href,el:"500 error - retrying"}),h("500 error - retrying"),m.query_solr(e,f,i,!0);else{if(!b.results||!b.results.result)return g({t:"event",ec:"searchbox error",ea:m.options.refid+": "+location.href,el:JSON.stringify(b)}),!1;if(b=b.results,g({t:"timing",utc:"searchbox getSolr",utv:"load",utl:m.options.refid+": "+location.href,utt:Math.round(1e3*b.time)}),j&&(g({t:"event",ec:"searchbox error",ea:m.options.refid+": "+location.href,el:"500 error - retrying was successful"}),h("500 error - retrying was successful")),k.autosuggest.generate&&m.generate_autosuggest(e,b,f),k.autosuggest.callback){var l=k.autosuggest.callback;"function"==typeof l?l(e,b,m,f):h('Callback function "'+k.autosuggest.callback+'" for autosuggest does not exist.');

}if(""!=k.autosuggest.first&&k.autocomplete){if(i==k.previous)return!1;k.previous=i,8!=event.keyCode&&k.autosuggest.first!==d&&(a(e,k.$parent).val(i+k.autosuggest.first.substring(k.previous.length)),m.create_selection(e,f))}k.clickListen||(k.clickListen=!0,a(c).click({options:k},function(b){0==a(b.target).parents().is(".rs_suggest")&&a(".rs_suggest",b.data.options.$parent).hide()})),a(".rs_suggest li",k.$parent).each(function(){a(this).on("mouseover.searchbox",{options:k},function(b){a(".rs_suggest li",b.data.options.$parent).each(function(){a(this).removeClass("rs_suggest_active")}),a(this).addClass("rs_suggest_active")}).on("click.searchbox",{$el:e,_self:m,product:f},function(a){m.save_selection(a.data.$el,this,a.data.product)})})}}).complete(function(){e.css("background","#fff")}).fail(function(a,b,c){"abort"!=b&&g({t:"event",ec:"searchbox error",ea:m.options.refid+": "+location.href,el:b+", "+c})})},create_geo:function(b,d){var e="",f=this.options[d],g=this;return b&&0==b.next().hasClass("rs_suggest")&&0!==a(".rs_suggest",f.$parent).length&&a(".rs_suggest",f.$parent).remove(),(0===a(".rs_suggest_geo",f.$parent).length&&b||!b)&&(e+='<div class="rs_suggest_geo">',e+="<ul>",e+=b?'<li data-geo="true" class="rs_suggest_active">':'<li data-geo="true">',e+='<div class="rs_suggest_left">',e+='<span class="rs_icon icon_location"></span>',e+=a.i18n._t("Use my Location"),e+="</div>",e+="</li>",e+="</ul>",e+="</div>"),b?(this.check_add(a(".rs_suggest",f.$parent),a(b,f.$parent),'<div class="rs_suggest"/>',!1,"after"),f.clickListen||(f.clickListen=!0,a(c).click({_self:this,product:d,$el:b},function(c){0!=a(c.target).parents().is(".rs_suggest")||a(c.target).is(b)||a(".rs_suggest",c.data._self.options[c.data.product].$parent).hide()})),e&&(e='<div class="rs_suggest_absolute">'+e+"</div>",a(".rs_suggest",f.$parent).append(e)),a(".rs_suggest",f.$parent).show(),a(".rs_suggest li",f.$parent).each(function(){a(this).on("mouseover.searchbox",{options:f},function(b){a(".rs_suggest li",b.data.options.$parent).each(function(){a(this).removeClass("rs_suggest_active")}),a(this).addClass("rs_suggest_active")}).on("click.searchbox",{$el:b,_self:g,product:d},function(a){g.save_selection(a.data.$el,this,a.data.product)})}),void 0):e},set_location:function(b,c,d,e){var f,h,i=this,j=this.options[c],k={format:"jsonp",product:c,refid:this.options.refid,latitude:d.coords.latitude,longitude:d.coords.longitude,cities:"true",airports:"true",jsoncallback:"?"};a.getJSON(this.init_getURL("autosuggest")+this.build_query(k),function(k){k=k.getSolr.error&&1240==k.getSolr.error.status_code?!1:k.getSolr.results.result,f=k&&k.city&&k.city.city_0["geodist()"]||!1,h=k&&k.airport&&k.airport.airport_0["geodist()"]||!1,f&&(h>f||!h)&&25>f?(e.data("cityid","air"==c&&"2"==j.version?k.city.city_0.cityid_t:k.city.city_0.cityid_ppn),e.data("name",k.city.city_0.city+", "+k.city.city_0.state_code),i.save_selection(b,e,c),b.prop("disabled",!1).css("background","#fff"),g({t:"event",ec:"searchbox setGeo",ea:i.options.refid+": "+location.href,el:{product:c,type:"city",name:k.city.city_0.city,id:"air"==c&&"2"==j.version?k.city.city_0.cityid_t:k.city.city_0.cityid_ppn,distance:f}})):h&&(f>h||!f)&&25>h?(e.data("airid",k.airport.airport_0.iata),e.data("name",k.airport.airport_0.airport),i.save_selection(b,e,c),b.prop("disabled",!1).css("background","#fff"),g({t:"event",ec:"searchbox setGeo",ea:i.options.refid+": "+location.href,el:{product:c,type:"airport",name:k.airport.airport_0.airport,iata:k.airport.airport_0.iata,distance:h}})):"hotel"==c?(i.check_add(a(".rs_latitude",j.$parent),j.$parent,'<input name="'+j.names.latitude+'" class="rs_latitude" type="hidden" />',d.coords.latitude),i.check_add(a(".rs_longitude",j.$parent),j.$parent,'<input name="'+j.names.longitude+'" class="rs_longitude" type="hidden" />',d.coords.longitude),b.val("Your Location").prop("disabled",!1).css("background","#fff"),g({t:"event",ec:"searchbox setGeo",ea:i.options.refid+": "+location.href,el:{product:c,type:"geo",lat:d.coords.latitude,lng:d.coords.longitude}})):i.error_location(b,c,{code:2})}).error(function(){i.error_location(b,c,{code:2})})},error_location:function(b,c,d){alert(1==d.code?a.i18n._t("Sorry, you must allow us to get your location to use this feature."):a.i18n._t("Sorry, we were unable to find your location. Please enter a location instead.")),g({t:"event",ec:"searchbox error",ea:this.options.refid+": "+location.href,el:{msg:"Geo Error: "+(1==d.code?"Permission Error":"Not Found"),product:c}}),b.val("").prop("disabled",!1).css("background","#fff")},generate_autosuggest:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r=this.options[d],s=[],t="",u="";0==b.next().hasClass("rs_suggest")&&0!==a(".rs_suggest",r.$parent).length&&a(".rs_suggest",r.$parent).remove(),this.check_add(a(".rs_suggest",r.$parent),b,'<div class="rs_suggest"/>',!1,"after"),r.autosuggest.first="",s.start='<div class="rs_suggest_absolute">',s.cities="",s.regions="",s.airports="",s.pois="",s.hotels="",s.end="";for(e in c.result){f=0,g="","airport"==e?(s.airports+='<div class="rs_suggest_air"><ul>',g="airports"):"city"==e?(s.cities+='<div class="rs_suggest_city"><ul>',g="cities"):"region"==e?(s.regions+='<div class="rs_suggest_region"><ul>',g="regions"):"poi"==e?(s.pois+='<div class="rs_suggest_poi"><ul>',g="pois"):"hotel"==e&&(s.hotels+='<div class="rs_suggest_hotel"><ul>',g="hotels");for(h in c.result[e])f<r.autosuggest["num_"+g]&&(i=c.result[e][h],q=i.airport||i.hotel_name||i.region_name||i.poi_name||i.city||(i.address&&i.address.city_name?i.address.city_name:!1),p=i.iata||i.hotelid_ppn||i.poiid_ppn||i.area_id||("air"==d&&"3"==r.version?i.cityid_ppn:"air"==d?i.cityid_t:i.car_city_ppn_id||i.cityid_ppn)||!1,k=i.state_code||(i.address&&i.address.state_code?i.address.state_code:!1),l=i.country_code||(i.address&&i.address.country_code?i.address.country_code:!1),m=i.address&&i.address.address_line_one?i.address.address_line_one:i.address||!1,n=i.country||!1,j=i.city||!1,o=this.options.pet_friendly?Number(String(i.pet_count)):Number(String(i.hotel_count)||String(i.rank))||!1,s[g]+="<li ","airports"==g?(s[g]+='data-airid="'+p+'" data-name="'+("air"==d&&j&&p?j+" ("+p+")":q)+'">',s[g]+='<div class="rs_suggest_left"><span class="rs_icon icon_airport"></span>'+q+"</div>",s[g]+='<div class="rs_suggest_right">'+p+"</div>",s[g]+='<div class="rs_suggest_full rs_suggest_city_name">'+(j?j+", ":"")+(k?k:l||"")+(k&&!j&&l?", "+l:"")+"</div>"):"hotels"==g?(s[g]+='data-hotelid="'+p+'" data-name="'+q+'">',s[g]+='<div class="rs_suggest_full"><span class="rs_icon icon_hotel"></span>'+q+"</div>",s[g]+='<div class="rs_suggest_full rs_suggest_city_name">'+(m?m+", ":"")+(q?q+" ":"")+(k?k+", ":"")+(l?l:"")+"</div>"):"pois"==g?(s[g]+='data-poiid="'+p+'" data-name="'+q+'">',s[g]+='<div class="rs_suggest_full"><span class="rs_icon icon_poi"></span>'+q+"</div>",s[g]+='<div class="rs_suggest_full rs_suggest_city_name">'+(m?m+", ":"")+(q?q+" ":"")+(k?k+", ":"")+(n?n:"")+"</div>"):"regions"==g?(s[g]+='data-regionid="'+p+'" data-name="'+q+'">',s[g]+='<div class="rs_suggest_left"><span class="rs_icon icon_region"></span>'+q+"</div>",s[g]+='<div class="rs_suggest_right">Nearby Hotels</div>'):"cities"==g&&(s[g]+='data-cityid="'+p+'" data-name="'+(k?q+", "+k:q+", "+n)+'">',s[g]+='<div class="rs_suggest_left"><span class="rs_icon icon_city"></span>'+(k?q+", "+k:q+", "+n)+"</div>",s[g]+='<div class="rs_suggest_city_name">'+n+"</div>",s[g]+='<div class="rs_suggest_right">'+("hotel"==d?0===o?'<div class="rs_sub_count">Nearby Hotels</div>':'<div class="rs_suggest_subhead">'+o+' <div class="rs_sub_count">'+(this.options.pet_friendly?"Pet Friendly ":"")+"Hotel"+(o>1?"s":"")+"</div></div>":"air"==d||"vp"==d?"All Airports":l)+" </div>"),s[g]+="</li>"),""!=r.autosuggest.first&&r.autosuggest.first||(r.autosuggest.first=k?q+", "+k:q+", "+l),0!=r.autosuggest.first.toUpperCase().indexOf(r.query.toUpperCase())&&(r.autosuggest.first=""),f++;s[g]+="</ul></div>"}r.autosuggest.more_options&&("hotel"==d?u="/hotels/search/?query="+r.query:"car"==d?u="/car_rentals/did_you_mean/?rs_pu_city="+r.query:"air"==d?u="rs_o_city"==b.attr("name")||"rs_d_city"==b.attr("name")?"/air/search/?air_search_type=roundtrip&rs_o_city="+a("input[name=rs_o_city]",r.$parent).val()+"&rs_d_city="+a("input[name=rs_d_city]",r.$parent).val():"rs_o_city1"==b.attr("name")||"rs_d_city1"==b.attr("name")?"/air/search/?air_search_type=oneway&rs_o_city1="+a("input[name=rs_o_city1]",r.$parent).val()+"&rs_d_city1="+a("input[name=rs_d_city1]",r.$parent).val():"/air/search/?air_search_type=multi&rs_o_city1="+a("input[name=rs_o_city1]",r.$parent).val()+"&rs_d_city1="+a("input[name=rs_d_city1]",r.$parent).val()+"&rs_o_city2="+a("input[name=rs_o_city2]",r.$parent).val()+"&rs_d_city2="+a("input[name=rs_d_city2]",r.$parent).val()+"&rs_o_city3="+a("input[name=rs_o_city3]",r.$parent).val()+"&rs_d_city3="+a("input[name=rs_d_city3]",r.$parent).val()+"&rs_o_city4="+a("input[name=rs_o_city4]",r.$parent).val()+"&rs_d_city4="+a("input[name=rs_d_city4]",r.$parent).val()+"&rs_o_city5="+a("input[name=rs_o_city5]",r.$parent).val()+"&rs_d_city5="+a("input[name=rs_d_city5]",r.$parent).val():"vp"==d&&(u="/vp/search/?rs_o_city="+a("input[name=rs_o_city]",r.$parent).val()+"&rs_d_city="+a("input[name=rs_d_city]",r.$parent).val()),s.end+='<div class="rs_suggest_show"><a href="'+this.options.cname+u+"&refid="+this.options.refid+'">Show More Options</a></div>'),s.end+="</div>",t+=s.start,r.autosuggest.geolocation&&(t+=this.create_geo(!1,d)),1==r.autosuggest.airports_first||3==r.query.length?(t+=s.airports,t+=s.cities,t+=s.regions,t+=s.pois,t+=s.hotels):(t+=s.cities,t+=s.regions,t+=s.airports,t+=s.pois,t+=s.hotels),t+=s.end;var v=t.match(r.autosuggest.geolocation?"<li.+?>(<li.+?>)":"<li.+?>"),w=v[0].length,x=v[0].slice(0,-1)+' class="rs_suggest_active">';t=t.substr(0,v.index)+x+t.substr(v.index+w),a(".rs_suggest",r.$parent).html(t).show()},create_selection:function(a,b){var c,d=a.get(0),e=this.options[b].previous.length,f=this.options[b].autosuggest.first.length;d.createTextRange?(c=d.createTextRange(),c.collapse(!0),c.moveStart("character",e),c.moveEnd("character",f),c.select()):d.setSelectionRange?d.setSelectionRange(e,f):d.selectionStart&&(d.selectionStart=e,d.selectionEnd=f),d.focus()},move_selection:function(b,c){var d=this.options[c],e=null,f=0;"down"==b?f=1:"up"==b&&(f=-1),a(".rs_suggest li",d.$parent).each(function(b){a(this).hasClass("rs_suggest_active")&&(a(this).removeClass("rs_suggest_active"),e=b+f,e==a(".rs_suggest li",d.$parent).get().length&&(e=0),b>e&&-1!=e&&a(".rs_suggest li",d.$parent).eq(e).addClass("rs_suggest_active")),b==e&&a(this).addClass("rs_suggest_active")}),0==e&&a(".rs_suggest ul:first-child li:first-child",d.$parent).get(0).className.replace("rs_suggest_active"),-1==e&&a(".rs_suggest li",d.$parent).eq(a(".rs_suggest li",d.$parent).get().length-1).addClass("rs_suggest_active")},save_selection:function(b,c,d){var e,f=this.options[d],i=a(c),j=0;""!=b.val()&&g({t:"event",ec:"searchbox set",ea:this.options.refid+": "+location.href,el:d+": "+('"'+b.val()+'" = "'+i.data("name")+'" ('+(i.data("cityid")||i.data("airid")||i.data("regionid")||i.data("poiid")||i.data("hotelid"))+")")}),b.val(i.data("name")).trigger("autosuggest_change"),i.data("cityid")?"hotel"==d?this.check_add(a(".rs_cityid",f.$parent),f.$parent,'<input name="'+f.names.city_id+'" class="rs_cityid" type="hidden" />',i.data("cityid")):"car"==d?b.hasClass(f.elements.from.replace(".",""))||f.elements.from=="#"+b.attr("id")?this.check_add(a(".rs_pu_cityid",f.$parent),f.$parent,'<input name="'+f.names.rs_pu_cityid+'" class="rs_pu_cityid" type="hidden" />',i.data("cityid")):(b.hasClass(f.elements.to.replace(".",""))||f.elements.to=="#"+b.attr("id"))&&this.check_add(a(".rs_do_cityid",f.$parent),f.$parent,'<input name="'+f.names.rs_do_cityid+'" class="rs_do_cityid" type="hidden" />',i.data("cityid")):"air"==d?b.parents().is(f.elements.round_trip)?b.is(f.elements.from)?this.check_add(a(".rs_o_aircode",f.elements.round_trip),a(f.elements.round_trip,f.$parent),'<input name="'+f.names.rs_o_aircode+'" class="rs_o_aircode" type="hidden" />',i.data("cityid")):b.is(f.elements.to)&&this.check_add(a(".rs_d_aircode",f.elements.round_trip),a(f.elements.round_trip,f.$parent),'<input name="'+f.names.rs_d_aircode+'" class="rs_d_aircode" type="hidden" />',i.data("cityid")):b.parents().is(f.elements.one_way)?b.is(f.elements.from)?this.check_add(a(".rs_o1_aircode",f.elements.one_way),a(f.elements.one_way,f.$parent),'<input name="'+f.names.rs_o1_aircode+'" class="rs_o1_aircode" type="hidden" />',i.data("cityid")):b.is(f.elements.to)&&this.check_add(a(".rs_d1_aircode",f.elements.one_way),a(f.elements.one_way,f.$parent),'<input name="'+f.names.rs_d1_aircode+'" class="rs_d1_aircode" type="hidden" />',i.data("cityid")):b.parents().is(f.elements.multi_dest)&&(b.is(f.elements.from)?(j=a(f.elements.from,f.elements.multi_dest).index(b)+1,this.check_add(a(".rs_o"+j+"_aircode",f.elements.multi_dest),a(f.elements.multi_dest,f.$parent),'<input name="'+f.names["rs_o"+j+"_aircode"]+'" class="rs_o'+j+'_aircode" type="hidden" />',i.data("cityid"))):b.is(f.elements.to)&&(j=a(f.elements.to,f.elements.multi_dest).index(b)+1,this.check_add(a(".rs_d"+j+"_aircode",f.elements.multi_dest),a(f.elements.multi_dest,f.$parent),'<input name="'+f.names["rs_d"+j+"_aircode"]+'" class="rs_d'+j+'_aircode" type="hidden" />',i.data("cityid")),f["d"+j+"_set"]=!1)):"vp"==d&&(b.is(f.elements.from)?this.check_add(a(".rs_o_cityid",f.$parent),f.$parent,'<input name="'+f.names.rs_o_cityid+'" class="rs_o_cityid" type="hidden" />',i.data("cityid")):b.is(f.elements.to)&&this.check_add(a(".rs_d_cityid",f.$parent),f.$parent,'<input name="'+f.names.rs_d_cityid+'" class="rs_d_cityid" type="hidden" />',i.data("cityid"))):i.data("airid")?"hotel"==d?this.check_add(a(".rs_airid",f.$parent),f.$parent,'<input name="'+f.names.airport_code+'" class="rs_airid" type="hidden" />',i.data("airid")):"car"==d?b.hasClass(f.elements.from.replace(".",""))||f.elements.from=="#"+b.attr("id")?this.check_add(a(".rs_pu_airport",f.$parent),f.$parent,'<input name="'+f.names.rs_pu_airport+'" class="rs_pu_airport" type="hidden" />',i.data("airid")):(b.hasClass(f.elements.to.replace(".",""))||f.elements.to=="#"+b.attr("id"))&&this.check_add(a(".rs_do_airport",f.$parent),f.$parent,'<input name="'+f.names.rs_do_airport+'" class="rs_do_airport" type="hidden" />',i.data("airid")):"air"==d?b.parents().is(f.elements.round_trip)?b.is(f.elements.from)?this.check_add(a(".rs_o_aircode",f.elements.round_trip),a(f.elements.round_trip,f.$parent),'<input name="'+f.names.rs_o_aircode+'" class="rs_o_aircode" type="hidden" />',i.data("airid")):b.is(f.elements.to)&&this.check_add(a(".rs_d_aircode",f.elements.round_trip),a(f.elements.round_trip,f.$parent),'<input name="'+f.names.rs_d_aircode+'" class="rs_d_aircode" type="hidden" />',i.data("airid")):b.parents().is(f.elements.one_way)?b.is(f.elements.from)?this.check_add(a(".rs_o1_aircode",f.elements.one_way),a(f.elements.one_way,f.$parent),'<input name="'+f.names.rs_o1_aircode+'" class="rs_o1_aircode" type="hidden" />',i.data("airid")):b.is(f.elements.to)&&this.check_add(a(".rs_d1_aircode",f.elements.one_way),a(f.elements.one_way,f.$parent),'<input name="'+f.names.rs_d1_aircode+'" class="rs_d1_aircode" type="hidden" />',i.data("airid")):b.parents().is(f.elements.multi_dest)&&(b.is(f.elements.from)?(j=a(f.elements.from,f.elements.multi_dest).index(b)+1,this.check_add(a(".rs_o"+j+"_aircode",f.elements.multi_dest),a(f.elements.multi_dest,f.$parent),'<input name="'+f.names["rs_o"+j+"_aircode"]+'" class="rs_o'+j+'_aircode" type="hidden" />',i.data("airid"))):b.is(f.elements.to)&&(j=a(f.elements.to,f.elements.multi_dest).index(b)+1,this.check_add(a(".rs_d"+j+"_aircode",f.elements.multi_dest),a(f.elements.multi_dest,f.$parent),'<input name="'+f.names["rs_d"+j+"_aircode"]+'" class="rs_d'+j+'_aircode" type="hidden" />',i.data("airid")),f["d"+j+"_set"]=!1)):"vp"==d&&(b.is(f.elements.from)?this.check_add(a(".rs_o_aircode",f.$parent),f.$parent,'<input name="'+f.names.rs_o_aircode+'" class="rs_o_aircode" type="hidden" />',i.data("airid")):b.is(f.elements.to)&&this.check_add(a(".rs_d_aircode",f.$parent),f.$parent,'<input name="'+f.names.rs_d_aircode+'" class="rs_d_aircode" type="hidden" />',i.data("airid"))):i.data("regionid")?"hotel"==d?this.check_add(a(".rs_regionid",f.$parent),f.$parent,'<input name="'+f.names.region_id+'" class="rs_regionid" type="hidden" />',i.data("regionid")):"car"==d?h("Car does not support region ids."):"air"==d?h("Air does not support region ids."):"vp"==d&&h("VP does not support region ids."):i.data("poiid")?"hotel"==d?this.check_add(a(".rs_poiid",f.$parent),f.$parent,'<input name="'+f.names.poi_id+'" class="rs_poiid" type="hidden" />',i.data("poiid")):"car"==d?h("Car does not support poi ids."):"air"==d?h("Air does not support poi ids."):"vp"==d&&h("VP does not support poi ids."):i.data("hotelid")?"hotel"==d?this.check_add(a(".rs_hotelid",f.$parent),f.$parent,'<input name="'+f.names.hotel_id+'" class="rs_hotelid" type="hidden" />',i.data("hotelid")):"car"==d?h("Car does not support hotel ids."):"air"==d?h("Air does not support hotel ids."):"vp"==d&&h("VP does not support hotel ids."):i.data("latitude")&&i.data("longitude")?"hotel"==d?(this.check_add(a(".rs_latitude",f.$parent),f.$parent,'<input name="'+f.names.latitude+'" class="rs_latitude" type="hidden" />',i.data("latitude")),this.check_add(a(".rs_longitude",f.$parent),f.$parent,'<input name="'+f.names.longitude+'" class="rs_longitude" type="hidden" />',i.data("longitude"))):"car"==d?h("Car does not support latitude & longitude searches."):"air"==d?h("Air does not support latitude & longitude searches."):"vp"==d&&h("VP does not support latitude & longitude searches."):i.data("geo")&&this.get_location(b,d,i),a(".rs_suggest",f.$parent).hide(),f.autosuggest.set_callback&&(e=f.autosuggest.set_callback,"function"==typeof e?e(i,b):h('Callback function "'+f.autosuggest.set_callback+'" for save_selection does not exist.'))},auto_set:function(b){var c=this.options[b];c.chk_in=c.currentDate.getMonth()+1+"/"+c.currentDate.getDate()+"/"+c.currentDate.getFullYear(),"air"==b&&(c.chk_in1=c.chk_in),a(".rs_chk_in",c.$parent).each(function(){"air"!=b||"rs_chk_in"!=a(this).attr("name")&&"rs_chk_out"!=a(this).attr("name")&&"rs_chk_in1"!=a(this).attr("name")?"air"!=b&&a(this).val(c.chk_in):a(this).val(c.chk_in)}),c.currentDate=new Date(c.chk_in),c.currentDate=new Date(c.currentDate.getFullYear(),c.currentDate.getMonth(),c.currentDate.getDate()+1),c.chk_out=c.currentDate.getMonth()+1+"/"+c.currentDate.getDate()+"/"+c.currentDate.getFullYear(),a(".rs_chk_out",c.$parent).val(c.chk_out)},make_cal:function(b,c,d){var e,f=this.options[c],g=!1;if("air"==c)for(g=b.parents().hasClass(f.elements.one_way.replace(".",""))||b.closest(f.elements.one_way).length?"one_way":f.elements.multi_dest&&(b.parents().hasClass(f.elements.multi_dest.replace(".",""))||b.closest(f.elements.multi_dest).length)?"multi_dest":"round_trip","rs_chk_in1"==b.attr("name")||"rs_chk_in2"==b.attr("name")||"rs_chk_in3"==b.attr("name")||"rs_chk_in4"==b.attr("name")||"rs_chk_in5"==b.attr("name")?d=b.attr("name").replace("rs_",""):("rs_chk_in1"==b.siblings("input").attr("name")||"rs_chk_in2"==b.siblings("input").attr("name")||"rs_chk_in3"==b.siblings("input").attr("name")||"rs_chk_in4"==b.siblings("input").attr("name")||"rs_chk_in5"==b.siblings("input").attr("name"))&&(d=b.siblings("input").attr("name").replace("rs_","")),e=1;5>=e;e++)f.elements["chk_in"+e+"_display"]&&(b.hasClass(f.elements["chk_in"+e+"_display"].replace(".",""))||b.children().hasClass(f.elements["chk_in"+e+"_display"].replace(".","")))&&(d="chk_in"+e),this.check_remove(a(".rs_chk_in"+e+"_box",f.$parent));this.check_remove(a(".rs_cal",this.options.$parent)),this.check_add(a(".rs_"+d+"_box",f.$parent),b,"<div class='rs_"+d+"_box rs_cal' style='display: none;'/>",!1,"after"),"chk_in"==d&&"block"==a(".rs_chk_out_box",f.$parent).css("display")&&a(".rs_chk_out_box",f.$parent).hide(),"chk_out"==d&&"block"==a(".rs_chk_in_box",f.$parent).css("display")&&a(".rs_chk_in_box",f.$parent).hide(),this.draw_month(c,d,!0,g)},next_month:function(a,b,c){var d=this.options[a];d.currentDate=new Date(d.currentDate.getFullYear(),d.currentDate.getMonth()+d.calendar.skip,1),this.dates.days_in_months[1]=29==new Date(d.currentDate.getFullYear(),1,29).getDate()?29:28,this.draw_month(a,b,!1,c)},previous_month:function(a,b,c){var d=this.options[a];d.currentDate=new Date(d.currentDate.getFullYear(),d.currentDate.getMonth()-d.calendar.skip,d.currentDate.getDate()),this.dates.days_in_months[1]=29==new Date(d.currentDate.getFullYear(),1,29).getDate()?29:28,this.draw_month(a,b,!1,c)},draw_month:function(b,d,e,f){var g,i,j,k,l,m,n,o,p,q,r,s=this.options[b],t=new Date(this.dates.max_date.getFullYear(),this.dates.max_date.getMonth(),this.dates.max_date.getDate()+1),u={chk_in:"",chk_out:""},v="";if("air"==b&&"round_trip"!=f)for(u={},g=1;("one_way"==f?1:5)>=g;g++)u["chk_in"+g]="";for(i in u)u.hasOwnProperty(i)&&s[i]&&(u[i]=new Date(s[i]),e&&(s.currentDate=u[i]));for(j=0;j<s.calendar.months;j++){for(k=7,l=6,m=new Date(s.currentDate.getFullYear(),s.currentDate.getMonth()+j,s.currentDate.getDate()),r=0,v+='<div class="rs_cal_box">',v+='<div class="rs_calTop">',(m.getMonth()>this.dates.today.getMonth()||m.getFullYear()>this.dates.today.getFullYear())&&0==j&&(v+='<span class="rs_cal_previous_month">'+s.calendar.previous_display+"</span>"),v+='<span class="rs_cal_month">'+this.dates.months[m.getMonth()]+" "+m.getFullYear()+"</span>",(m.getFullYear()<this.dates.max_date.getFullYear()||m.getMonth()<this.dates.max_date.getMonth()&&m.getFullYear()==this.dates.max_date.getFullYear())&&j==s.calendar.months-1&&(v+='<span class="rs_cal_next_month">'+s.calendar.next_display+"</span>"),v+="</div>",v+='<table class="rs_cal_table">',v+='<tr class="rs_topRow"><td>S</td><td>M</td><td>T</td><td>W</td><td>T</td><td>F</td><td>S</td></tr>',n=1;n<=this.dates.days_in_months[m.getMonth()];n++){if(m=new Date(m.getFullYear(),m.getMonth(),n),7==k&&(v+="<tr>"),1==n&&0!=m.getDay())for(o=0;o<m.getDay();o++)v+="<td>&nbsp</td>",k--;m<this.dates.today||m>this.dates.max_date&&("chk_in"==d||"chk_in1"==d)||m>t&&("chk_out"==d||"chk_in2"==d||"chk_in3"==d||"chk_in4"==d||"chk_in5"==d)||u.chk_in>m&&"chk_in"!=d||u.chk_in1>m&&"chk_in1"!=d?v+='<td class="rs_disabledDate">'+n+"</td>":u.chk_in&&u.chk_in.getTime()==m.getTime()||u.chk_out&&u.chk_out.getTime()==m.getTime()||u.chk_in1&&u.chk_in1.getTime()==m.getTime()||u.chk_in2&&u.chk_in2.getTime()==m.getTime()||u.chk_in3&&u.chk_in3.getTime()==m.getTime()||u.chk_in4&&u.chk_in4.getTime()==m.getTime()||u.chk_in5&&u.chk_in5.getTime()==m.getTime()?(0==r&&u.chk_out&&m.getTime()==u.chk_out.getTime()&&r++,v+=s.calendar.allow_same&&("chk_out"==d||"chk_in1"==d||"chk_in2"==d&&m>=u.chk_in1||"chk_in3"==d&&m>=u.chk_in2||"chk_in4"==d&&m>=u.chk_in3||"chk_in5"==d&&m>=u.chk_in4)?'<td class="rs_setDate '+(0==r?"rs_setDateStart":"rs_setDateEnd")+' rs_cal_day" data-day="'+m.getDate()+'" data-month="'+m.getMonth()+'" data-year="'+m.getFullYear()+'">'+n+"</td>":'<td class="rs_setDate '+(0==r?"rs_setDateStart":"rs_setDateEnd")+("chk_in"==d||"chk_out"==d&&u.chk_out&&u.chk_out.getTime()==m.getTime()?' rs_cal_day"':'"')+' data-day="'+m.getDate()+'" data-month="'+m.getMonth()+'" data-year="'+m.getFullYear()+'">'+n+"</td>",r++):m>u.chk_in&&m<u.chk_out||m>u.chk_in1&&m<u.chk_in5||m>u.chk_in1&&m<u.chk_in4||m>u.chk_in1&&m<u.chk_in3||m>u.chk_in1&&m<u.chk_in2?(v+="chk_in3"==d&&m<=u.chk_in2||"chk_in4"==d&&m<=u.chk_in3||"chk_in5"==d&&m<=u.chk_in4?'<td class="rs_betweenDate" data-day="'+m.getDate()+'" data-month="'+m.getMonth()+'" data-year="'+m.getFullYear()+'">'+n+"</td>":'<td class="rs_cal_day rs_betweenDate" data-day="'+m.getDate()+'" data-month="'+m.getMonth()+'" data-year="'+m.getFullYear()+'">'+n+"</td>",r++):v+='<td class="rs_cal_day" data-day="'+m.getDate()+'" data-month="'+m.getMonth()+'" data-year="'+m.getFullYear()+'">'+n+"</td>",k--,0==k&&(v+="</tr>",l--,k=7)}if(7!=k)for(;7>k&&k>0;)v+="<td>&nbsp</td>",k--,0==k&&(l--,v+="</tr>");if(0!=l)for(;l>0;){for(v+="<tr>",o=0;7>o;o++)v+="<td>&nbsp</td>";v+="</tr>",l--}1==s.calendar.months&&(v+='<tr class="rs_calClose"><td colspan="7">X Close Calendar</td></tr>'),v+="</table></div>"}if(a(".rs_"+d+"_box",s.$parent).html(v).show(),a(".rs_cal_next_month",s.$parent).on("click.searchbox",{_self:this,product:b,cal:d,air_sub:f},function(a){a.data._self.next_month(a.data.product,a.data.cal,a.data.air_sub)}),a(".rs_cal_previous_month",s.$parent).on("click.searchbox",{_self:this,product:b,cal:d,air_sub:f},function(a){a.data._self.previous_month(a.data.product,a.data.cal,a.data.air_sub)}),a(".rs_calClose",s.$parent).on("click.searchbox",{_self:this,product:b,cal:d},function(b){a(".rs_"+b.data.cal+"_box",b.data._self.options[b.data.product].$parent).hide()}),a(".rs_cal_day",s.$parent).on("click.searchbox",{_self:this,product:b,cal:d},function(b){b.data._self.set_date(a(this),b.data.product,b.data.cal,!1)}).on("mouseenter.searchbox",{_self:this,product:b,cal:d},function(b){var c=b.data.cal.replace(/([^0-9])/g,""),d=c?"check_in"+c:"chk_in"==b.data.cal?"check_in":"check_out",e=a("input[name="+b.data._self.options[b.data.product].names[d]+"]",b.data._self.options[b.data.product].$parent),f=new Date(a(this).data("year"),a(this).data("month"),a(this).data("day"));b.data._self.options[b.data.product].calendar.inputs[d]=e.val(),e.val(b.data._self.dates.days[f.getDay()].substr(0,3)+" "+f.getDate()+"/"+(f.getMonth()+1))}).on("mouseleave.searchbox",{_self:this,product:b,cal:d},function(b){var c=b.data.cal.replace(/([^0-9])/g,""),d=c?"check_in"+c:"chk_in"==b.data.cal?"check_in":"check_out",e=a("input[name="+b.data._self.options[b.data.product].names[d]+"]",b.data._self.options[b.data.product].$parent);e.val(b.data._self.options[b.data.product].calendar.inputs[d])}),s.calendar.listen||(s.calendar.listen=a(c).click({options:s,product:b},function(b){if(0==a(b.target).parents().is(".rs_cal")&&"rs_cal_next_month"!=a(b.target).attr("class")&&"rs_cal_previous_month"!=a(b.target).attr("class")&&"rs_cal_previous_month"!=a(b.target).parent().attr("class")&&"rs_cal_next_month"!=a(b.target).parent().attr("class")&&b.target.classList&&"rs_cal_previous_month"!=a("."+b.target.classList[0]).parent().attr("class")&&b.target.classList&&"rs_cal_next_month"!=a("."+b.target.classList[0]).parent().attr("class")){for(p=(b.data.options.elements.chk_in.replace(/\s+/g,"")+","+b.data.options.elements.chk_out.replace(/\s+/g,"")).split(","),q=!0,g=0;g<p.length;g++)a(p[g],b.data.options.$parent).each(function(){a(b.target).get(0)==this&&(q=!1)}),a(b.target).parents().is(p[g])&&(q=!1);(a(b.target).hasClass("rs_chk_in")||a(b.target).hasClass("rs_chk_out"))&&(q=!1),q&&a(".rs_cal",b.data.options.$parent).hide()}})),s.calendar.callback){var w=s.calendar.callback;"function"==typeof w?w(this,b,d):h('Callback function "'+s.calendar.callback+'" for draw_month does not exist.')}},set_date:function(b,c,d,e){var f,g,i,j,k,l,m,n=this.options[c],o=d.replace(/([^0-9])/g,""),p=null,q={};if(e?(b=a("option:selected",b),f="day_in"==d?"month_in":"day_out"==d?"month_out":"month_in"+o,d="day_in"==d?"chk_in":"day_out"==d?"chk_out":"chk_in"+o,g="air"==c?a(n.elements[f]+" option:selected",a(""!=o?b.parents().is(n.elements.multi_dest)?n.elements.multi_dest:n.elements.one_way:n.elements.round_trip)):a(n.elements[f]+" option:selected",n.$parent)):a(".rs_"+d+"_box",n.$parent).hide(),this.check_add(a("input[name="+n.names["chk_in"==d?"check_in":"check_out"]+"]",n.$parent),n.$parent,"<input class='rs_"+d+"' name='rs_"+d+"' type='hidden' />"),n[d]=e?g.data("month")+1+"/"+b.data("day")+"/"+g.data("year"):b.data("month")+1+"/"+b.data("day")+"/"+b.data("year"),n.calendar.inputs["chk_in"==d||o?"check_in"+o:"check_out"]=this.format_date(c,new Date(n[d]),n.calendar.date_format),a("input[name="+n.names[o?"check_in"+o:"chk_in"==d?"check_in":"check_out"]+"]",n.$parent).val(this.format_date(c,new Date(n[d]),n.calendar.date_format)).trigger("change"),i=new Date(n[d]),n.elements[d+"_display"]&&("car"==c&&(p=a(n.elements["chk_in"==d?"time_in":"time_out"],n.$parent).val().split(":"),i.setHours(p[0],p[1])),a(n.elements[d+"_display"],n.$parent).html(this.format_date(c,i))),"chk_in"==d)n.calendar.next_day?(n.currentDate=new Date(n.chk_in),n.currentDate=new Date(n.currentDate.getFullYear(),n.currentDate.getMonth(),n.currentDate.getDate()+1),n.chk_out=n.currentDate.getMonth()+1+"/"+n.currentDate.getDate()+"/"+n.currentDate.getFullYear(),this.check_add(a("input[name="+n.names.check_out+"]",n.$parent),n.$parent,"<input class='rs_chk_out' name='rs_chk_out' type='hidden'/>",this.format_date(c,new Date(n.chk_out),n.calendar.date_format)),e&&(this.generate_months(c,"month_out"),a(n.elements.month_out,n.$parent).val(n.currentDate.getMonth()),this.generate_days(a(n.elements.month_out+" option:selected",n.$parent),c,"month_out"),a(n.elements.day_out,n.$parent).val(n.currentDate.getDate())),n.elements.chk_out_display&&(i=new Date(n.chk_out),"car"==c&&(p=a(n.elements.time_out,n.$parent).val().split(":"),i.setHours(p[0],p[1])),a(n.elements.chk_out_display,n.$parent).html(this.format_date(c,i)))):e&&(n.currentDate=new Date(n.chk_in),n.currentDate=new Date(n.currentDate.getFullYear(),n.currentDate.getMonth(),n.currentDate.getDate()+1),this.generate_months(c,"month_out")),e||(n.calendar.pop_out&&!o&&this.make_cal(a("input[name="+n.names.check_out+"]",n.$parent),c,"chk_out"),n.elements.month_in&&n.elements.day_in&&n.elements.month_out&&n.elements.day_out&&(a(n.elements.month_in,n.$parent).val(b.data("month")),this.generate_days(a(n.elements.month_in+" option:selected",n.$parent),c,"month_in",!0),a(n.elements.day_in,n.$parent).val(b.data("day")),n.calendar.next_day&&(a(n.elements.month_out,n.$parent).val(n.currentDate.getMonth()),this.generate_days(a(n.elements.month_out+" option:selected",n.$parent),c,"month_out",!0),a(n.elements.day_out,n.$parent).val(n.currentDate.getDate()))));else if("chk_out"!=d||e){if(o&&!e)for(k=o;5>=k;k++)k==o&&n.elements["month_in"+k]&&n.elements["day_in"+k]?(a(n.elements["month_in"+k],n.$parent).val(b.data("month")),this.generate_days(a(n.elements["month_in"+k]+" option:selected",n.$parent),c,"month_in"+k,!0),a(n.elements["day_in"+k],n.$parent).val(b.data("day"))):n.elements["month_in"+k]&&n.elements["day_in"+k]&&this.generate_months(c,"month_in"+k)}else n.elements.month_in&&n.elements.day_in&&n.elements.month_out&&n.elements.day_out&&(a(n.elements.month_out,n.$parent).val(n.currentDate.getMonth()),this.generate_days(a(n.elements.month_out+" option:selected",n.$parent),c,"month_out",!0),j=new Date(n.chk_out),a(n.elements.day_out,n.$parent).val(j.getDate()));for(k=1;5>=k;k++)if(n["chk_in"+k]&&!e){if(q["chk_in"+k]=new Date(n["chk_in"+k]),k>1)for(l=k-1;l>0;l--)if(q["chk_in"+l]>q["chk_in"+k]){this.remove_extra(c,k);break}}else if(d=="chk_in"+k&&e)for(n.currentDate=new Date(n["chk_in"+k]),n.currentDate=new Date(n.currentDate.getFullYear(),n.currentDate.getMonth(),n.currentDate.getDate()+1),q["chk_in"+k]=new Date(n["chk_in"+k]),l=k+1;5>=l;l++)if(q["chk_in"+l]=new Date(n["chk_in"+l]),this.generate_months(c,"month_in"+l),q["chk_in"+l]<q["chk_in"+k]){this.remove_extra(c,k);break}n.calendar.set_callback&&(m=n.calendar.set_callback,"function"==typeof m?m(b,this,c,d):h('Callback function "'+n.calendar.set_callback+'" for set_date does not exist.'))},remove_extra:function(b,c){var d=this.options[b];for(c;5>=c;c++)delete d["chk_in"+c],a("input[name=rs_chk_in"+c+"]",d.$parent).val(""),d.elements["chk_in"+c+"_display"]&&a(d.elements["chk_in"+c+"_display"],d.$parent).html(this.format_date(b,!1))},set_car_time:function(b,c,d){var e=this.options[c],f="time_in"==d?"chk_in":"chk_out",g=new Date(e[f]),h=b.val().split(":");e[f]&&e.elements[f+"_display"]&&(g.setHours(h[0],h[1]),a(e.elements[f+"_display"],e.$parent).html(this.format_date(c,g)))},format_date:function(a,b,c){var d,e=this.options[a],f="",g="",c=c||e.calendar.output_format;for(d=0;d<c.length;d++)if(g=c.charAt(d),
"["==g){switch(g=c.charAt(d+1)){case"d":f+=b?(b.getDate()<10?"0":"")+b.getDate():"Day";break;case"j":f+=b?b.getDate():"Day";break;case"D":f+=b?this.dates.days[b.getDay()].substring(0,3):"";break;case"l":f+=b?this.dates.days[b.getDay()]:"";break;case"F":f+=b?this.dates.months[b.getMonth()]:"Month";break;case"n":f+=b?b.getMonth()+1:"";break;case"m":f+=b?(b.getMonth()<9?"0":"")+(b.getMonth()+1):"";break;case"M":f+=b?this.dates.months[b.getMonth()].substring(0,3):"";break;case"y":f+=b?String(b.getFullYear()).substring(2,4):"Year";break;case"Y":f+=b?b.getFullYear():"Year";break;case"g":f+=b?b.getHours()%12||12:"";break;case"G":f+=b?b.getHours():"";break;case"i":f+=String(b.getMinutes()).length<2?b?"0"+b.getMinutes():"":b?b.getMinutes():"";break;case"s":f+=String(b.getSeconds()).length<2?b?"0"+b.getSeconds():"":b?b.getSeconds():"";break;case"a":f+=b?b.getHours()<12?"am":"pm":"";break;case"A":f+=b?b.getHours()<12?"AM":"PM":"";break;default:f+=g}d+=2}else f+=g;return f},check_form:function(c,d){var e,f=this.options[d],i=null,j=null,k="",l=0,m=0;if(this.url_string="",f.pre_check){if(i=f.pre_check,"function"!=typeof i)return h('Pre-check function "'+f.pre_check+'" for check_form does not exist.'),g({t:"event",ec:"searchbox error",ea:this.options.refid+": "+location.href,el:'Pre-check function "'+f.pre_check+'" for check_form does not exist.'}),!1;if(1!=i(c,d))return!1}if(this.check_add(a("input[name=refid]",f.$parent),f.$parent,"<input name='refid' type='hidden' value='"+this.options.refid+"'/>"),"hotel"==d){if(!this.check_hotel())return!1;k=a(f.elements.autosuggest,f.$parent).val()||"n/a"}else if("car"==d){if(!this.check_car())return!1;k=a(f.elements.from,f.$parent).val()||"n/a",1==a(f.elements.different_return,f.$parent).is(":checked")&&(k+=" - "+(a(f.elements.to,f.$parent).val()||"n/a"))}else if("air"==d){if(!this.check_air(c))return!1;e=c.parents().is(f.elements.round_trip)?"round_trip":c.parents().is(f.elements.one_way)?"one_way":c.parents().is(f.elements.multi_dest)?"multi_dest":!1,a(f.elements.from,f.elements[e]).each(function(){l>0&&(k+=" | "),l++,m=0,k+=a(this).val()||"n/a",a(f.elements.to,f.elements[e]).each(function(){m++,l==m&&(k+=" - "+(a(this).val()||"n/a"))})})}else{if("vp"!=d)return h("Invalid product in check_form."),!1;if(!this.check_vp())return!1;k=a(f.elements.from,f.$parent).val()||"n/a",k+=" - "+(a(f.elements.to,f.$parent).val()||"n/a")}if(this.options.open_window&&(a(f.$parent).attr("target","_blank"),"air"==d&&setTimeout(a.proxy(this.re_add_air,this),1500)),this.options.iframe&&a(f.$parent).attr("target","_parent"),g({t:"event",ec:"searchbox submit",ea:this.options.refid+": "+location.href,el:this.url_string+f.$parent.serialize(),cn:k,cm:d,ci:""}),(-1!==this.url_string.indexOf("search")||-1!==this.url_string.indexOf("did_you_mean"))&&g({t:"event",ec:"searchbox search",ea:this.options.refid+" - "+d+": "+location.href,el:k}),f.$parent.is("form")||(b.location.href=this.url_string+a(":input",f.$parent).serialize()),f.post_check){if(j=f.post_check,"function"!=typeof j)return h('Post-check function "'+f.post_check+'" for check_form does not exist.'),g({t:"event",ec:"searchbox error",ea:this.options.refid+": "+location.href,el:'Post-check function "'+f.post_check+'" for check_form does not exist.'}),!1;if(1!=j(c,d))return!1}return!0},check_hotel:function(){var c=this.options.hotel,d=/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}$/,e=a(c.elements.autosuggest,c.$parent),f=a("input[name="+c.names.city_id+"]",c.$parent),g=a("input[name="+c.names.airport_code+"]",c.$parent),h=a("input[name="+c.names.region_id+"]",c.$parent),i=a("input[name="+c.names.poi_id+"]",c.$parent),j=a("input[name="+c.names.hotel_id+"]",c.$parent),k=a("input[name="+c.names.latitude+"]",c.$parent),l=a("input[name="+c.names.longitude+"]",c.$parent),m=a("input[name="+c.names.check_in+"]",c.$parent),n=a("input[name="+c.names.check_out+"]",c.$parent),o=a("select[name="+c.names.rooms+"]",c.$parent),p=a("select[name="+c.names.adults+"]",c.$parent),q=a("select[name="+c.names.children+"]",c.$parent);if(0!==f.length&&""!=f.val()||0!==g.length&&""!=g.val()||0!==h.length&&""!=h.val()||0!==i.length&&""!=i.val()||0!==k.length&&""!=k.val()&&0!==l.length&&""!=l.val()&&e.val()!=c.autosuggest.default_label)c.express_deals?(this.url_string=c.action.results||this.options.cname+"/hotels/express_results/?",a(c.$parent).prop("action",this.url_string)):(this.url_string=c.action.results||this.options.cname+"/hotels/results/?",a(c.$parent).prop("action",this.url_string));else if(0!==j.length&&""!=j.val()&&e.val()!=c.autosuggest.default_label)this.url_string=c.action.hotel||this.options.cname+"/hotels/hotel/?",a(c.$parent).prop("action",this.url_string);else{if(""==e.val()||e.val()==c.autosuggest.default_label||null===e.val().match(/[^\s*]/))return this.check_alert("hotel",a.i18n._t("Please enter a location to search for.")),e.val("").focus(),!1;this.url_string=c.action.search||this.options.cname+"/hotels/search/?",a(c.$parent).prop("action",this.url_string)}if(c.calendar.required&&0==d.test(m.val()))return this.check_alert("hotel",a.i18n._t("Please select a check in date.")),m.trigger("click"),!1;if(c.calendar.required&&0==d.test(n.val()))return this.check_alert("hotel",a.i18n._t("Please select a check out date.")),n.trigger("click"),!1;if(0!=d.test(n.val())&&0!=d.test(m.val())&&(this.string_to_date(n.val(),c.calendar.date_format)-this.string_to_date(m.val(),c.calendar.date_format))/864e5>21)return this.options.allow_group_booking?(c.popup&&this.do_pop(e.val(),"&hotels=true"),b.location.href=""!=this.options.group_booking&&null!=this.options.group_booking?this.options.group_booking:"http://hotelsbycity.hotelplanner.com/Search/Index.cfm?City="+e.val()+"&InDate="+m.val()+"&Outdate="+n.val()+"&NumRooms="+o.val()+"&sc=HBC"+this.options.refid,!1):(this.check_alert("hotel",a.i18n._t("Sorry, reservations have a maximum length of 21 days.")),!1);if((0==d.test(n.val())||0==d.test(m.val()))&&(n.val(""),m.val("")),0!==o.length&&o.val()>=5&&o.val()<=8){if(!this.options.allow_group_booking)return this.check_alert("hotel",a.i18n._t("Sorry, we only allow reservations between 1 and 4 rooms.")),!1;if(e.val()!=c.autosuggest.default_label)return c.popup&&this.do_pop(e.val(),"&hotels=true"),b.location.href=""!=this.options.group_booking&&null!=this.options.group_booking?this.options.group_booking:2055==this.options.refid?"http://motelgroups.com/Search/Index.cfm?City="+e.val()+"&InDate="+m.val()+"&Outdate="+n.val()+"&NumRooms="+o.val()+"&sc=HBC"+this.options.refid:"http://hotelsbycity.hotelplanner.com/Search/Index.cfm?City="+e.val()+"&InDate="+m.val()+"&Outdate="+n.val()+"&NumRooms="+o.val()+"&sc=HBC"+this.options.refid,!1}else if(0!==o.length&&o.val()>8){if(!this.options.allow_group_booking)return this.check_alert("hotel",a.i18n._t("Sorry, we only allow reservations between 1 and 4 rooms.")),!1;if(e.val()!=c.autosuggest.default_label)return c.popup&&this.do_pop(e.val(),"&hotels=true"),b.location.href=""!=this.options.group_booking&&null!=this.options.group_booking?this.options.group_booking:2055==this.options.refid?"http://motelgroups.com/GroupForm.cfm?City="+e.val()+"&InDate="+m.val()+"&Outdate="+n.val()+"&NumRooms="+o.val()+"&sc=HBC"+this.options.refid:"http://hotelsbycity.hotelplanner.com/GroupForm.cfm?City="+e.val()+"&InDate="+m.val()+"&Outdate="+n.val()+"&NumRooms="+o.val()+"&sc=HBC"+this.options.refid,!1}return 0!==p.length&&0!==q.length&&0!==o.length&&parseInt(p.val())+parseInt(q.val())>4*parseInt(o.val())||0!==p.length&&0!==o.length&&parseInt(p.val())>4*parseInt(o.val())?(this.check_alert("hotel","Sorry, we only allow a max of "+4*o.val()+" guests for "+o.val()+" room"+(o.val()>1?"s":"")+".\nPlease increase the number of rooms or decrease the number of guests."),!1):0!==p.length&&0!==q.length&&0!==o.length&&parseInt(p.val())+parseInt(q.val())<parseInt(o.val())||0!==p.length&&0!==o.length&&parseInt(p.val())<parseInt(o.val())?(this.check_alert("hotel",a.i18n._t("Sorry, we have a minimum of 1 guest per room. Please increase the number of guests or decrease the number of rooms.")),!1):(0!==k.length&&""!=k.val()&&0!==l.length&&""!=l.val()&&e.prop("name","poi_name"),c.express_deals&&this.check_add(a("input[name=express_deals]",c.$parent),c.$parent,"<input name='express_deals' type='hidden' value='true'/>"),e.val()&&c.popup&&this.do_pop(e.val(),"&hotels=true"),"[m]/[d]/[Y]"!=c.calendar.date_format&&(c.chk_in&&m.val(this.format_date("hotel",new Date(c.chk_in),"[m]/[d]/[Y]")),c.chk_out&&n.val(this.format_date("hotel",new Date(c.chk_out),"[m]/[d]/[Y]"))),!0)},check_car:function(){var b=this.options.car,c=/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}$/,d=a(b.elements.from,b.$parent),e=a(b.elements.to,b.$parent),f=a(b.elements.different_return,b.$parent),g=a("input[name="+b.names.rs_pu_cityid+"]",b.$parent),h=a("input[name="+b.names.rs_do_cityid+"]",b.$parent),i=a("input[name="+b.names.rs_pu_airport+"]",b.$parent),j=a("input[name="+b.names.rs_do_airport+"]",b.$parent),k=a("input[name="+b.names.check_in+"]",b.$parent),l=a("input[name="+b.names.check_out+"]",b.$parent),m=new Date(k.val()),n=a(b.elements.time_in).val().split(":"),o=new Date(l.val()),p=a(b.elements.time_out).val().split(":");if(m.setHours(n[0],n[1]),o.setHours(p[0],p[1]),1==f.is(":checked")&&(0!==g.length&&""!=g.val()||0!==i.length&&""!=i.val()&&d.val()!=b.autosuggest.from_default_label)&&(0!==h.length&&""!=h.val()||0!==j.length&&""!=j.val()&&e.val()!=b.autosuggest.to_default_label)||0==f.is(":checked")&&(0!==g.length&&""!=g.val()||0!==i.length&&""!=i.val()&&d.val()!=b.autosuggest.from_default_label)){if(1==f.is(":checked")&&0!==g.length&&""!=g.val()&&0!==h.length&&""!=h.val())return this.check_alert("car",a.i18n._t("For a one-way itinerary, either pick up or drop off has to be an airport location.")),!1;this.url_string=b.action.results||this.options.cname+"/car_rentals/results/?",a(b.$parent).attr("action",this.url_string)}else{if(!(1==f.is(":checked")&&""!=d.val()&&""!=e.val()&&d.val()!=b.autosuggest.from_default_label&&e.val()!=b.autosuggest.to_default_label&&null!==d.val().match(/[^\s*]/)&&null!==e.val().match(/[^\s*]/)||0==f.is(":checked")&&""!=d.val()&&d.val()!=b.autosuggest.from_default_label&&null!==d.val().match(/[^\s*]/)))return 1==f.is(":checked")&&""!=d.val()&&d.val()!=b.autosuggest.from_default_label&&null!==d.val().match(/[^\s*]/)?(this.check_alert("car",a.i18n._t("Please enter a dropoff location to search for.")),d.val("").focus()):(this.check_alert("car",a.i18n._t("Please enter a pickup location to search for.")),e.val("").focus()),!1;this.url_string=b.action.search||this.options.cname+"/car_rentals/did_you_mean/?",a(b.$parent).attr("action",this.url_string)}if(0==f.is(":checked")&&(""!=h.val()&&h.val(""),""!=j.val()&&j.val(""),""!=e.val()&&e.val("")),b.calendar.required&&0==c.test(k.val()))return this.check_alert("car",a.i18n._t("Please select a pick up date.")),!1;if(b.calendar.required&&0==c.test(l.val()))return this.check_alert("car",a.i18n._t("Please select a drop off date.")),!1;if(0!=c.test(l.val())&&0!=c.test(k.val())&&(this.string_to_date(l.val(),b.calendar.date_format)-this.string_to_date(k.val(),b.calendar.date_format))/864e5>310)return this.check_alert("car",a.i18n._t("Sorry, reservations have a maximum length of 310 days.")),!1;if(0!=c.test(l.val())&&0!=c.test(k.val())&&l.val()==k.val()){if(18e5>o-m)return this.check_alert("car",a.i18n._t("Please choose a drop off time at least 30 minutes after your pick up time.")),!1}else if(0==c.test(l.val())||0==c.test(k.val()))l.val(""),k.val("");else if((m-this.dates.now)/1e3/60<30)return this.check_alert("car",a.i18n._t("You cannot select a pickup time less than 30 minutes from now.")),!1;return d.val()&&b.popup&&this.do_pop(d.val(),"&hotels=true"),"[m]/[d]/[Y]"!=b.calendar.date_format&&(b.chk_in&&k.val(this.format_date("car",new Date(b.chk_in),"[m]/[d]/[Y]")),b.chk_out&&l.val(this.format_date("car",new Date(b.chk_out),"[m]/[d]/[Y]"))),!0},check_air:function(b){var c,d=this.options.air,e=/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}$/,f=b.parents().is(d.elements.round_trip)?"round_trip":b.parents().is(d.elements.one_way)?"one_way":b.parents().is(d.elements.multi_dest)?"multi_dest":!1,g=a(d.elements.from,d.elements[f]),h=a(d.elements.to,d.elements[f]),i=a("input[name="+d.names["round_trip"==f?"rs_o_aircode":"rs_o1_aircode"]+"]",d.elements[f]),j=a("input[name="+d.names["round_trip"==f?"rs_d_aircode":"rs_d1_aircode"]+"]",d.elements[f]),k=a("input[name="+d.names["round_trip"==f?"check_in":"check_in1"]+"]",d.elements[f]),l=a("input[name="+d.names.check_out+"]",d.elements[f]),m=a("select[name="+d.names.adults+"]",d.elements[f]),n=a("select[name="+d.names.children+"]",d.elements[f]),o=[],p=[],q=[],r=[],s=[];if("multi_dest"==f)for(g.each(function(){o.push(a(this).val()||!1)}),h.each(function(){p.push(a(this).val()||!1)}),c=1;5>=c;c++)q.push(a("input[name="+d.names["rs_o"+c+"_aircode"]+"]",d.elements.multi_dest).val()||!1),r.push(a("input[name="+d.names["rs_d"+c+"_aircode"]+"]",d.elements.multi_dest).val()||!1);if("multi_dest"!=f){if(g.val()==d.autosuggest.from_default_label||h.val()==d.autosuggest.to_default_label||""==g.val()||""==h.val()||""==i.val()||0===i.length||""==j.val()||0===j.length||(3!=i.val().length||3!=j.val().length)&&("3"!=d.version||3!=i.val().length&&9!=i.val().length||3!=j.val().length&&9!=j.val().length))if(g.val()!=d.autosuggest.from_default_label&&h.val()!=d.autosuggest.to_default_label&&""!=g.val()&&""!=h.val()&&null!==g.val().match(/[^\s*]/)&&null!==h.val().match(/[^\s*]/))this.url_string=d.action.search||this.options.cname+("3"==d.version?"/flights/search/?":"/air/search/?"),a(d.$parent).attr("action",this.url_string);else{if(g.val()==d.autosuggest.from_default_label||""==g.val()||null===g.val().match(/[^\s*]/))return this.check_alert("air",a.i18n._t("Please enter an origin location to search for.")),g.val("").focus(),!1;if(h.val()==d.autosuggest.to_default_label||""==h.val()||null===h.val().match(/[^\s*]/))return this.check_alert("air",a.i18n._t("Please enter a destination location to search for.")),h.val("").focus(),!1}else this.url_string=d.action.results||this.options.cname+("3"==d.version?"/flights/results/depart/?":"/air/search/?"),a(d.$parent).attr("action",this.url_string);if(d.calendar.required&&0==e.test(k.val()))return this.check_alert("air",a.i18n._t("Please select a departure date.")),!1;if(d.calendar.required&&0==e.test(l.val())&&"round_trip"==f)return this.check_alert("air",a.i18n._t("Please select a return date.")),!1}else if("multi_dest"==f){for(c=0;5>c;c++)if(s.push("blank"),o[c]!=d.autosuggest.from_default_label&&""!=o[c]||p[c]!=d.autosuggest.to_default_label&&""!=p[c]){if(c>0&&-1!==s.indexOf("blank")&&s.indexOf("blank")!==c)return this.check_alert("air",a.i18n._t("You are missing a previous location. Please enter an origin location to search for.")),a(d.elements.multi_dest+" input[name=rs_o_city"+(s.indexOf("blank")+1)+"]",d.$parent).val("").focus(),!1;if(o[c]!=d.autosuggest.from_default_label&&""!=o[c]&&p[c]!=d.autosuggest.to_default_label&&""!=p[c]&&q[c]&&r[c]&&(3==q[c].length&&3==r[c].length||"3"==d.version&&(3==q[c].length||9==q[c].length)&&(3==r[c].length||9==r[c].length)))s[c]="results";else if(o[c]!=d.autosuggest.from_default_label&&""!=o[c]&&p[c]!=d.autosuggest.to_default_label&&""!=p[c]&&null!==o[c].match(/[^\s*]/)&&null!==p[c].match(/[^\s*]/))s[c]="search";else{if(o[c]==d.autosuggest.from_default_label||""==o[c]||null===o[c].match(/[^\s*]/))return this.check_alert("air",a.i18n._t("Please enter an origin location to search for.")),a(d.elements.multi_dest+" input[name=rs_o_city"+(c+1)+"]",d.$parent).val("").focus(),!1;if(p[c]==d.autosuggest.to_default_label||""==p[c]||null===p[c].match(/[^\s*]/))return this.check_alert("air",a.i18n._t("Please enter a destination location to search for.")),a(d.elements.multi_dest+" input[name=rs_d_city"+(c+1)+"]",d.$parent).val("").focus(),!1}if(d.calendar.required&&0==e.test(a("input[name=rs_chk_in"+(c+1)+"]",d.elements.multi_dest).val()))return this.check_alert("air",a.i18n._t("Please select a departure date.")),!1}else{if(0==c)return this.check_alert("air",a.i18n._t("You must enter a starting location.")),a(d.elements.multi_dest+" input[name=rs_o_city1]",d.$parent).val("").focus(),!1;a(d.elements.multi_dest+" input[name=rs_o_city"+(c+1)+"]",d.$parent).val(""),a(d.elements.multi_dest+" input[name=rs_d_city"+(c+1)+"]",d.$parent).val("")}-1===s.indexOf("search")?(this.url_string=d.action.results||this.options.cname+("3"==d.version?"/flights/results/depart/?":"/air/search/?"),a(d.$parent).attr("action",this.url_string)):(this.url_string=d.action.search||this.options.cname+("3"==d.version?"/flights/search/?":"/air/search/?"),a(d.$parent).attr("action",this.url_string))}if(parseInt(m.val())+parseInt(n.val())>8)return this.check_alert("air",a.i18n._t("Sorry, flight reservations are limited to 8 passengers.")),!1;if(this.check_add(a(d.elements[f]+" input[name=air_search_type]",d.$parent),a(d.elements[f],d.$parent),'<input name="air_search_type" type="hidden" />'),d._private={removed:{}},"round_trip"==f?(d._private.removed.one_way=d.elements.one_way?a(d.elements.one_way,d.$parent)[0].outerHTML:!1,d._private.removed.multi_dest=d.elements.multi_dest?a(d.elements.multi_dest,d.$parent)[0].outerHTML:!1,a(d.elements.one_way,d.$parent).remove(),a(d.elements.multi_dest,d.$parent).remove(),a(d.elements.round_trip+" input[name=air_search_type]",d.$parent).val("roundtrip")):"one_way"==f?(d._private.removed.round_trip=d.elements.round_trip?a(d.elements.round_trip,d.$parent)[0].outerHTML:!1,d._private.removed.multi_dest=d.elements.multi_dest?a(d.elements.multi_dest,d.$parent)[0].outerHTML:!1,a(d.elements.round_trip,d.$parent).remove(),a(d.elements.multi_dest,d.$parent).remove(),a(d.elements.one_way+" input[name=air_search_type]",d.$parent).val("oneway")):"multi_dest"==f&&(d._private.removed.round_trip=d.elements.round_trip?a(d.elements.round_trip,d.$parent)[0].outerHTML:!1,d._private.removed.one_way=d.elements.one_way?a(d.elements.one_way,d.$parent)[0].outerHTML:!1,a(d.elements.round_trip,d.$parent).remove(),a(d.elements.one_way,d.$parent).remove(),a(".rs_chk_in",d.elements.multi_dest).each(function(){d.calendar.required&&0==e.test(a(this).val())&&a(this).val("")}),a(d.elements.multi_dest+" input[name=air_search_type]",d.$parent).val("multi")),h.val()&&d.popup&&this.do_pop(h.val(),"&hotels=true"),"[m]/[d]/[Y]"!=d.calendar.date_format)for(d.chk_in&&k.val(this.format_date("air",new Date(d.chk_in),"[m]/[d]/[Y]")),d.chk_out&&l.val(this.format_date("air",new Date(d.chk_out),"[m]/[d]/[Y]")),c=1;5>=c;c++)d["chk_in"+c]&&""!=a("input[name=rs_chk_in"+c+"]",d.elements.multi_dest).val()&&a("input[name=rs_chk_in"+c+"]",d.elements.multi_dest).val(this.format_date("air",new Date(d["chk_in"+c]),"[m]/[d]/[Y]"));return!0},check_vp:function(){var c=this.options.vp,d=/^[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}$/,e=a(c.elements.from,c.$parent),f=a(c.elements.to,c.$parent),g=a("input[name="+c.names.rs_o_cityid+"]",c.$parent),h=a("input[name="+c.names.rs_d_cityid+"]",c.$parent),i=a("input[name="+c.names.rs_o_aircode+"]",c.$parent),j=a("input[name="+c.names.rs_d_aircode+"]",c.$parent),k=a("input[name="+c.names.check_in+"]",c.$parent),l=a("input[name="+c.names.check_out+"]",c.$parent),m=a("select[name="+c.names.rooms+"]",c.$parent),n=a("select[name="+c.names.adults+"]",c.$parent),o=a("select[name="+c.names.children+"]",c.$parent),p=a(".childrens_ages",c.$parent),q=0,r="",s=1,t=0,u="";if((0!==g.length&&""!=g.val()||0!==i.length&&""!=i.val())&&(0!==h.length&&""!=h.val()||0!==j.length&&""!=j.val())&&e.val()!=c.autosuggest.from_default_label&&f.val()!=c.autosuggest.to_default_label)this.url_string=c.action.results||this.options.cname+"/vp/results/?",a(c.$parent).attr("action",this.url_string);else if(""!=e.val()&&e.val()!=c.autosuggest.from_default_label&&null!==e.val().match(/[^\s*]/)&&""!=f.val()&&f.val()!=c.autosuggest.to_default_label&&null!==f.val().match(/[^s*]/))this.url_string=c.action.search||this.options.cname+"/vp/search/?",a(c.$parent).attr("action",this.url_string);else{if(""==e.val()||e.val()==c.autosuggest.from_default_label||null===e.val().match(/[^\s*]/))return this.check_alert("vp",a.i18n._t("Please enter an origin location to search for.")),e.val("").focus(),!1;if(""==f.val()||f.val()==c.autosuggest.to_default_label||null===f.val().match(/[^\s*]/))return this.check_alert("vp",a.i18n._t("Please enter a destination location to search for.")),f.val("").focus(),!1}return c.calendar.required&&0==d.test(k.val())?(this.check_alert("vp",a.i18n._t("Please select a check in date.")),!1):c.calendar.required&&0==d.test(l.val())?(this.check_alert("vp",a.i18n._t("Please select a check out date.")),!1):0!=d.test(l.val())&&0!=d.test(k.val())&&(this.string_to_date(l.val(),c.calendar.date_format)-this.string_to_date(k.val(),c.calendar.date_format))/864e5>21?this.options.allow_group_booking?confirm(a.i18n._t("Sorry, vacation packages can only be booked for stays of 21 days or less.")+"\n"+a.i18n._t("If you wish to search for only a hotel, click OK, otherwise click CANCEL and modify your search."))?(c.popup&&this.do_pop(f.val(),"&vp=true"),b.location.href=""!=this.options.group_booking&&null!=this.options.group_booking?this.options.group_booking:"http://hotelsbycity.hotelplanner.com/Search/Index.cfm?City="+f.val()+"&InDate="+k.val()+"&Outdate="+l.val()+"&NumRooms="+m.val()+"&sc=HBC"+this.options.refid,!1):!1:(this.check_alert("vp",a.i18n._t("Sorry, reservations have a maximum length of 21 days.")),!1):((0==d.test(l.val())||0==d.test(k.val()))&&(l.val(""),k.val("")),(parseInt(n.val(),10)+parseInt(o.val(),10))/parseInt(m.val(),10)>4&&(q=Math.ceil((parseInt(n.val(),10)+parseInt(o.val(),10))/parseInt(m.val(),10)/4)),0!=q?(this.check_alert("vp",a.i18n._t("Sorry, at most four guests can stay in each hotel room.")+"\n"+a.i18n._t("Please increase the number of rooms for your trip.")+"\n"+a.i18n._n("For the number of travelers you have selected, you will require at least %d rooms.","For the number of travelers you have selected, you will require at least %d rooms.",{count:q,sprintf:q})),!1):(r+=0!==n.length&&""!=n.val()?n.val():"1",u=parseInt(r),0!==p.length&&p.each(function(){r+="^"+a(this).val(),0==a(this).val()?(r+="-"+a(c.elements.infant_seating+" input[name=rs_infant"+s+"]:checked",c.$parent).val(),"lap"==a(c.elements.infant_seating+" input[name=rs_infant"+s+"]:checked",c.$parent).val()?t++:u++,s++):u++}),t>parseInt(n.val(),10)?(this.check_alert("vp",a.i18n._t("Sorry, due to airline regulations, at most one lap infant is permitted per adult traveler.")),!1):u>8?(this.check_alert("vp",a.i18n._t("Sorry, at most 8 passengers can travel for a vacation package.")),!1):(this.check_add(a("input[name=rs_passengers]",c.$parent),a(c.$parent),'<input name="rs_passengers" type="hidden" />',r),f.val()&&c.popup&&this.do_pop(f.val(),"&hotels=true"),"[m]/[d]/[Y]"!=c.calendar.date_format&&(c.chk_in&&k.val(this.format_date("vp",new Date(c.chk_in),"[m]/[d]/[Y]")),c.chk_out&&l.val(this.format_date("vp",new Date(c.chk_out),"[m]/[d]/[Y]"))),!0)))},re_add_air:function(){var b,c=this.options.air;if(c._private.removed){for(b in c._private.removed)c._private.removed.round_trip?c._private.removed.one_way?c._private.removed.multi_dest||a(c.elements.multi_dest,c.$parent).after(c._private.removed[b]):a(c.elements.one_way,c.$parent).after(c._private.removed[b]):a(c.elements.round_trip,c.$parent).after(c._private.removed[b]);delete c._private.removed,this.destroy(),a.data(this.$el,"_searchbox",new i(this.$el,this.options))}},destroy:function(){this.$el.removeData("_searchbox").removeAttr("data-_searchbox"),this.$el.add("*").off(".searchbox")}},a.fn.searchbox=function(b,c){return uuid||(uuid=f()),a.fn.searchbox.check_options(b)?(b=a.extend(!0,{},a.fn.searchbox.defaults,b),1!=this.length?(g({t:"event",ec:"searchbox error",ea:b.refid+": "+location.href,el:'The div "'+this.selector+'" does not exist.'}),h('The div "'+this.selector+'" does not exist.')):this.each(function(){a.data(this,"_searchbox")||a.data(this,"_searchbox",new i(a(this),b,c))})):!1},a.fn.searchbox.check_options=function(a){var b=!0,c="";return a.refid&&String(a.refid).match("^[0-9]{4}$")||(c+="You must specify a refid.",b=!1),a.hotel&&a.hotel.enabled===!1&&a.car&&a.car.enabled===!1&&a.air&&a.air.enabled===!1&&a.vp&&a.vp.enabled===!1&&(c+="You must enable at least one product.",b=!1),a.skip_ref&&1==a.skip_ref&&(1!=a.hotel.active&&1!=a.car.active&&1!=a.air.active&&1!=a.vp.active&&(c+="Because you are skipping RefData, you must activate at least one product.",b=!1),a.accountid&&String(a.accountid).match("^[0-9]{4}$")||(c+="Because you are skipping RefData, you must specify the accountid.",b=!1)),b||(g({t:"event",ec:"searchbox error",ea:(a.refid||"0000")+": "+location.href,el:c}),h(c)),b},a.fn.searchbox.get=function(b){var c,e;if(c=a("*").filter(function(){return a(this).data("_searchbox")!==d}),b||(h("Listing all serachboxes...",!1),h("----",!1)),c.length>0){if(b)return c;for(e=0;e<c.length;e++)h(a(c[e]),!1),h(a(c[e]).data("_searchbox"),!1),h("----",!1)}else{if(b)return!1;h("No searchboxes found...",!1),h("----",!1)}return!0},a.fn.searchbox.set=function(a,b,c){var d,e,b=b.split(".")||!1;return 1!=a.length?h('The div "'+a.selector+'" does not exist.'):a.data("_searchbox")?!b||!c&&null!=c?h("You must specify an option and a value."):(d=a.data("_searchbox"),e=function(a,b,c){if(b.length>1){var d=b.shift();e(a[d]="[object Object]"==Object.prototype.toString.call(a[d])?a[d]:{},b,c)}else a[b[0]]=c},e(d,b,c),a.data("_searchbox",d),!0):h('The div "'+a.selector+'" does not have a searchbox attached to it at this time. Maybe try on document.ready?')},a.fn.searchbox.defaults={hotel:{elements:{form:"hotel",autosuggest:".autosuggest",chk_in:".rs_chk_in",chk_out:".rs_chk_out",rooms:".rooms",search:".search",required:!0},calendar:{next_day:!0,today:!1,pop_out:!0,months:1,skip:1,previous_display:"&larr;",next_display:"&rarr;",allow_same:!1,output_format:"[M] - [d] - [Y]",date_format:"[m]/[d]/[Y]",required:!1,callback:null,set_callback:null,inputs:{}},autosuggest:{enabled:!0,callback:null,generate:!0,cities:!0,airports:!0,regions:!0,pois:!1,hotels:!1,num_hotels:3,num_regions:3,num_airports:4,num_pois:3,num_cities:4,more_options:!0,airports_first:!1,default_label:a.i18n._t("Enter a City or Airport"),geolocation:!1,set_callback:null,plugin:!1},action:{results:!1,hotel:!1,search:!1},names:{query:"query",city_id:"city_id",airport_code:"airport_code",region_id:"region_id",poi_id:"poi_id",hotel_id:"hotel_id",check_in:"check_in",check_out:"check_out",rooms:"rooms",adults:"adults",children:"children",latitude:"latitude",longitude:"longitude"},version:3,autocomplete:!1,generate_rooms:!0,generate_guests:!0,default_rooms:1,default_guests:2,select_name:!1,pre_check:null,post_check:null,express_deals:!1,popup:!0,ignore_alerts:!1,enabled:!0,active:!1},car:{elements:{form:"car",from:".pickup",different_return:"#different_return",to:".dropoff",chk_in:".rs_chk_in",chk_out:".rs_chk_out",time_in:".rs_time_in",time_out:".rs_time_out",search:".search",required:!0},calendar:{next_day:!0,today:!1,pop_out:!0,months:1,skip:1,previous_display:"&larr;",next_display:"&rarr;",allow_same:!0,output_format:"[M] - [d] - [Y] - [g]:[i]:[s] [a]",date_format:"[m]/[d]/[Y]",time_format:"[g]:[i] [a]",generate_time:!0,pickup_time:"10:00",dropoff_time:"10:00",required:!0,callback:null,set_callback:null,inputs:{}},autosuggest:{enabled:!0,callback:null,generate:!0,cities:!0,airports:!0,regions:!1,pois:!1,hotels:!1,num_hotels:0,num_regions:0,num_airports:4,num_pois:0,num_cities:4,more_options:!0,airports_first:!1,from_default_label:a.i18n._t("Enter a City or Airport"),to_default_label:a.i18n._t("Enter a City or Airport"),geolocation:!1,set_callback:null,plugin:!1},action:{results:!1,search:!1},names:{rs_pu_cityid:"rs_pu_cityid",rs_do_cityid:"rs_do_cityid",rs_pu_airport:"rs_pu_airport",rs_do_airport:"rs_do_airport",check_in:"rs_pu_date",check_out:"rs_do_date"},version:3,autocomplete:!1,pre_check:null,post_check:null,select_name:!1,popup:!0,ignore_alerts:!1,enabled:!0,active:!1},air:{elements:{form:"air",round_trip:"#air_round_trip",one_way:"#air_one_way",multi_dest:"#air_multi_dest",from:".from",to:".to",chk_in:".rs_chk_in",chk_out:".rs_chk_out",adults:".rs_adults",children:".rs_children",search:".search",required:!0},calendar:{next_day:!0,today:!1,pop_out:!0,months:1,skip:1,previous_display:"&larr;",next_display:"&rarr;",allow_same:!0,output_format:"[M] - [d] - [Y]",date_format:"[m]/[d]/[Y]",required:!0,callback:null,set_callback:null,inputs:{}},autosuggest:{enabled:!0,callback:null,generate:!0,cities:!0,airports:!0,regions:!1,pois:!1,hotels:!1,num_hotels:0,num_regions:0,num_airports:4,num_pois:0,num_cities:4,more_options:!1,airports_first:!1,from_default_label:a.i18n._t("Enter a City or Airport"),to_default_label:a.i18n._t("Enter a City or Airport"),geolocation:!1,set_callback:null,plugin:!1},action:{results:!1,search:!1},names:{rs_o_aircode:"rs_o_aircode",rs_d_aircode:"rs_d_aircode",rs_o1_aircode:"rs_o_aircode1",rs_d1_aircode:"rs_d_aircode1",rs_o2_aircode:"rs_o_aircode2",rs_d2_aircode:"rs_d_aircode2",rs_o3_aircode:"rs_o_aircode3",rs_d3_aircode:"rs_d_aircode3",rs_o4_aircode:"rs_o_aircode4",rs_d4_aircode:"rs_d_aircode4",rs_o5_aircode:"rs_o_aircode5",rs_d5_aircode:"rs_d_aircode5",check_in:"rs_chk_in",check_out:"rs_chk_out",check_in1:"rs_chk_in1",check_in2:"rs_chk_in2",check_in3:"rs_chk_in3",check_in4:"rs_chk_in4",check_in5:"rs_chk_in5",adults:"rs_adults",children:"rs_children"},version:3,generate_guests:!0,default_guests:1,autocomplete:!1,select_name:!1,pre_check:null,post_check:null,popup:!0,ignore_alerts:!1,enabled:!0,active:!1},vp:{elements:{form:"vp",from:".from",to:".to",chk_in:".rs_chk_in",chk_out:".rs_chk_out",rooms:".rooms",adults:".rs_adults_input",children:".rs_child_input",children_ages:"#childrens_ages",infant_seating:"#infant_seating",search:".search",required:!0},calendar:{next_day:!0,today:!1,pop_out:!0,months:1,skip:1,previous_display:"&larr;",next_display:"&rarr;",allow_same:!1,output_format:"[M] - [d] - [Y]",date_format:"[m]/[d]/[Y]",required:!0,callback:null,set_callback:null,inputs:{}},autosuggest:{enabled:!0,callback:null,generate:!0,cities:!0,airports:!0,regions:!1,pois:!1,hotels:!1,num_hotels:0,num_regions:0,num_airports:4,num_pois:0,num_cities:4,more_options:!0,airports_first:!1,from_default_label:a.i18n._t("Enter a City or Airport"),to_default_label:a.i18n._t("Enter a City or Airport"),geolocation:!1,set_callback:null,plugin:!1},action:{results:!1,search:!1},names:{rs_o_cityid:"rs_o_cityid",rs_d_cityid:"rs_d_cityid",rs_o_aircode:"rs_o_aircode",rs_d_aircode:"rs_d_aircode",check_in:"rs_chk_in",check_out:"rs_chk_out",rooms:"rs_rooms",adults:"rs_adults",children:"rs_children"},version:2,autocomplete:!1,generate_guests:!0,generate_rooms:!0,default_rooms:1,default_guests:1,select_name:!1,pre_check:null,post_check:null,popup:!0,ignore_alerts:!1,enabled:!0,active:!1},refid:2050,cname:"//secure.rezserver.com",protocol:!1,skip_ref:!1,filter_city:!1,filter_country:!1,filter_state:!1,group_booking:null,allow_group_booking:!0,vcid:null,pet_friendly:!1,environment:"local",backend:!1,open_window:!1,iframe:!1}}(jQuery,window,document);